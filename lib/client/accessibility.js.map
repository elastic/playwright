{"version":3,"sources":["../../src/client/accessibility.ts"],"names":["axNodeFromProtocol","axNode","result","value","valueNumber","undefined","valueString","checked","pressed","children","map","Accessibility","constructor","channel","_channel","snapshot","options","root","_elementChannel","accessibilitySnapshot","interestingOnly","rootAXNode"],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAaA,SAASA,kBAAT,CAA4BC,MAA5B,EAAuE;AACrE,QAAMC,MAAwB,GAAG,EAC/B,GAAGD,MAD4B;AAE/BE,IAAAA,KAAK,EAAEF,MAAM,CAACG,WAAP,KAAuBC,SAAvB,GAAmCJ,MAAM,CAACG,WAA1C,GAAwDH,MAAM,CAACK,WAFvC;AAG/BC,IAAAA,OAAO,EAAEN,MAAM,CAACM,OAAP,KAAmB,SAAnB,GAA+B,IAA/B,GAAsCN,MAAM,CAACM,OAAP,KAAmB,WAAnB,GAAiC,KAAjC,GAAyCN,MAAM,CAACM,OAHhE;AAI/BC,IAAAA,OAAO,EAAEP,MAAM,CAACO,OAAP,KAAmB,SAAnB,GAA+B,IAA/B,GAAsCP,MAAM,CAACO,OAAP,KAAmB,UAAnB,GAAgC,KAAhC,GAAwCP,MAAM,CAACO,OAJ/D;AAK/BC,IAAAA,QAAQ,EAAER,MAAM,CAACQ,QAAP,GAAkBR,MAAM,CAACQ,QAAP,CAAgBC,GAAhB,CAAoBV,kBAApB,CAAlB,GAA4DK;AALvC,GAAjC;AAOA,SAAQH,MAAD,CAAgBE,WAAvB;AACA,SAAQF,MAAD,CAAgBI,WAAvB;AACA,SAAOJ,MAAP;AACD;;AAEM,MAAMS,aAAN,CAAiD;AAGtDC,EAAAA,WAAW,CAACC,OAAD,EAAgC;AAAA,SAFnCC,QAEmC;AACzC,SAAKA,QAAL,GAAgBD,OAAhB;AACD;;AAEa,QAARE,QAAQ,CAACC,OAA4D,GAAG,EAAhE,EAAsG;AAClH,UAAMC,IAAI,GAAGD,OAAO,CAACC,IAAR,GAAeD,OAAO,CAACC,IAAR,CAAaC,eAA5B,GAA8Cb,SAA3D;AACA,UAAMH,MAAM,GAAG,MAAM,KAAKY,QAAL,CAAcK,qBAAd,CAAoC;AAAEC,MAAAA,eAAe,EAAEJ,OAAO,CAACI,eAA3B;AAA4CH,MAAAA;AAA5C,KAApC,CAArB;AACA,WAAOf,MAAM,CAACmB,UAAP,GAAoBrB,kBAAkB,CAACE,MAAM,CAACmB,UAAR,CAAtC,GAA4D,IAAnE;AACD;;AAXqD","sourcesContent":["/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as channels from '../protocol/channels';\nimport { ElementHandle } from './elementHandle';\nimport * as api from '../../types/types';\n\ntype SerializedAXNode = Omit<channels.AXNode, 'valueString' | 'valueNumber' | 'children' | 'checked' | 'pressed'> & {\n  value?: string|number,\n  checked?: boolean | 'mixed',\n  pressed?: boolean | 'mixed',\n  children?: SerializedAXNode[]\n};\n\nfunction axNodeFromProtocol(axNode: channels.AXNode): SerializedAXNode {\n  const result: SerializedAXNode = {\n    ...axNode,\n    value: axNode.valueNumber !== undefined ? axNode.valueNumber : axNode.valueString,\n    checked: axNode.checked === 'checked' ? true : axNode.checked === 'unchecked' ? false : axNode.checked,\n    pressed: axNode.pressed === 'pressed' ? true : axNode.pressed === 'released' ? false : axNode.pressed,\n    children: axNode.children ? axNode.children.map(axNodeFromProtocol) : undefined,\n  };\n  delete (result as any).valueNumber;\n  delete (result as any).valueString;\n  return result;\n}\n\nexport class Accessibility implements api.Accessibility {\n  private _channel: channels.PageChannel;\n\n  constructor(channel: channels.PageChannel) {\n    this._channel = channel;\n  }\n\n  async snapshot(options: { interestingOnly?: boolean; root?: ElementHandle } = {}): Promise<SerializedAXNode | null> {\n    const root = options.root ? options.root._elementChannel : undefined;\n    const result = await this._channel.accessibilitySnapshot({ interestingOnly: options.interestingOnly, root });\n    return result.rootAXNode ? axNodeFromProtocol(result.rootAXNode) : null;\n  }\n}\n"],"file":"accessibility.js"}