{"version":3,"sources":["../../src/dispatchers/frameDispatcher.ts"],"names":["FrameDispatcher","Dispatcher","from","scope","frame","result","fromNullable","constructor","url","name","parentFrame","loadStates","Array","_subtreeLifecycleEvents","_frame","on","Frame","Events","AddLifecycle","lifecycleEvent","_dispatchEvent","add","RemoveLifecycle","remove","Navigation","event","params","error","message","undefined","newDocument","request","RequestDispatcher","_scope","goto","metadata","response","frameElement","element","ElementHandleDispatcher","evaluateExpression","value","evaluateExpressionAndWaitForSignals","expression","isFunction","arg","evaluateExpressionHandle","handle","fromJSHandle","evaluateExpressionHandleAndWaitForSignals","waitForSelector","selector","dispatchEvent","type","eventInit","evalOnSelector","evalOnSelectorAndWaitForSignals","strict","evalOnSelectorAll","evalOnSelectorAllAndWaitForSignals","querySelector","querySelectorAll","elements","map","e","content","setContent","html","addScriptTag","addStyleTag","click","dblclick","dragAndDrop","source","target","tap","fill","focus","textContent","innerText","innerHTML","getAttribute","inputValue","isChecked","isDisabled","isEditable","isEnabled","isHidden","isVisible","hover","selectOption","_elementHandle","values","options","setInputFiles","files","text","press","key","check","uncheck","waitForFunction","_waitForFunctionExpression","title"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Frame, NavigationEvent } from '../server/frames';\nimport * as channels from '../protocol/channels';\nimport { Dispatcher, DispatcherScope, lookupNullableDispatcher, existingDispatcher } from './dispatcher';\nimport { ElementHandleDispatcher } from './elementHandlerDispatcher';\nimport { parseArgument, serializeResult } from './jsHandleDispatcher';\nimport { ResponseDispatcher, RequestDispatcher } from './networkDispatchers';\nimport { CallMetadata } from '../server/instrumentation';\n\nexport class FrameDispatcher extends Dispatcher<Frame, channels.FrameInitializer> implements channels.FrameChannel {\n  private _frame: Frame;\n\n  static from(scope: DispatcherScope, frame: Frame): FrameDispatcher {\n    const result = existingDispatcher<FrameDispatcher>(frame);\n    return result || new FrameDispatcher(scope, frame);\n  }\n\n  static fromNullable(scope: DispatcherScope, frame: Frame | null): FrameDispatcher | undefined {\n    if (!frame)\n      return;\n    return FrameDispatcher.from(scope, frame);\n  }\n\n  private constructor(scope: DispatcherScope, frame: Frame) {\n    super(scope, frame, 'Frame', {\n      url: frame.url(),\n      name: frame.name(),\n      parentFrame: FrameDispatcher.fromNullable(scope, frame.parentFrame()),\n      loadStates: Array.from(frame._subtreeLifecycleEvents),\n    });\n    this._frame = frame;\n    frame.on(Frame.Events.AddLifecycle, lifecycleEvent => {\n      this._dispatchEvent('loadstate', { add: lifecycleEvent });\n    });\n    frame.on(Frame.Events.RemoveLifecycle, lifecycleEvent => {\n      this._dispatchEvent('loadstate', { remove: lifecycleEvent });\n    });\n    frame.on(Frame.Events.Navigation, (event: NavigationEvent) => {\n      const params = { url: event.url, name: event.name, error: event.error ? event.error.message : undefined };\n      if (event.newDocument)\n        (params as any).newDocument = { request: RequestDispatcher.fromNullable(this._scope, event.newDocument.request || null) };\n      this._dispatchEvent('navigated', params);\n    });\n  }\n\n  async goto(params: channels.FrameGotoParams, metadata: CallMetadata): Promise<channels.FrameGotoResult> {\n    return { response: lookupNullableDispatcher<ResponseDispatcher>(await this._frame.goto(metadata, params.url, params)) };\n  }\n\n  async frameElement(): Promise<channels.FrameFrameElementResult> {\n    return { element: ElementHandleDispatcher.from(this._scope, await this._frame.frameElement()) };\n  }\n\n  async evaluateExpression(params: channels.FrameEvaluateExpressionParams, metadata: CallMetadata): Promise<channels.FrameEvaluateExpressionResult> {\n    return { value: serializeResult(await this._frame.evaluateExpressionAndWaitForSignals(params.expression, params.isFunction, parseArgument(params.arg), 'main')) };\n  }\n\n  async evaluateExpressionHandle(params: channels.FrameEvaluateExpressionHandleParams, metadata: CallMetadata): Promise<channels.FrameEvaluateExpressionHandleResult> {\n    return { handle: ElementHandleDispatcher.fromJSHandle(this._scope, await this._frame.evaluateExpressionHandleAndWaitForSignals(params.expression, params.isFunction, parseArgument(params.arg), 'main')) };\n  }\n\n  async waitForSelector(params: channels.FrameWaitForSelectorParams, metadata: CallMetadata): Promise<channels.FrameWaitForSelectorResult> {\n    return { element: ElementHandleDispatcher.fromNullable(this._scope, await this._frame.waitForSelector(metadata, params.selector, params)) };\n  }\n\n  async dispatchEvent(params: channels.FrameDispatchEventParams, metadata: CallMetadata): Promise<void> {\n    return this._frame.dispatchEvent(metadata, params.selector, params.type, parseArgument(params.eventInit), params);\n  }\n\n  async evalOnSelector(params: channels.FrameEvalOnSelectorParams, metadata: CallMetadata): Promise<channels.FrameEvalOnSelectorResult> {\n    return { value: serializeResult(await this._frame.evalOnSelectorAndWaitForSignals(params.selector, !!params.strict, params.expression, params.isFunction, parseArgument(params.arg))) };\n  }\n\n  async evalOnSelectorAll(params: channels.FrameEvalOnSelectorAllParams, metadata: CallMetadata): Promise<channels.FrameEvalOnSelectorAllResult> {\n    return { value: serializeResult(await this._frame.evalOnSelectorAllAndWaitForSignals(params.selector, params.expression, params.isFunction, parseArgument(params.arg))) };\n  }\n\n  async querySelector(params: channels.FrameQuerySelectorParams, metadata: CallMetadata): Promise<channels.FrameQuerySelectorResult> {\n    return { element: ElementHandleDispatcher.fromNullable(this._scope, await this._frame.querySelector(params.selector, params)) };\n  }\n\n  async querySelectorAll(params: channels.FrameQuerySelectorAllParams, metadata: CallMetadata): Promise<channels.FrameQuerySelectorAllResult> {\n    const elements = await this._frame.querySelectorAll(params.selector);\n    return { elements: elements.map(e => ElementHandleDispatcher.from(this._scope, e)) };\n  }\n\n  async content(): Promise<channels.FrameContentResult> {\n    return { value: await this._frame.content() };\n  }\n\n  async setContent(params: channels.FrameSetContentParams, metadata: CallMetadata): Promise<void> {\n    return await this._frame.setContent(metadata, params.html, params);\n  }\n\n  async addScriptTag(params: channels.FrameAddScriptTagParams, metadata: CallMetadata): Promise<channels.FrameAddScriptTagResult> {\n    return { element: ElementHandleDispatcher.from(this._scope, await this._frame.addScriptTag(params)) };\n  }\n\n  async addStyleTag(params: channels.FrameAddStyleTagParams, metadata: CallMetadata): Promise<channels.FrameAddStyleTagResult> {\n    return { element: ElementHandleDispatcher.from(this._scope, await this._frame.addStyleTag(params)) };\n  }\n\n  async click(params: channels.FrameClickParams, metadata: CallMetadata): Promise<void> {\n    return await this._frame.click(metadata, params.selector, params);\n  }\n\n  async dblclick(params: channels.FrameDblclickParams, metadata: CallMetadata): Promise<void> {\n    return await this._frame.dblclick(metadata, params.selector, params);\n  }\n\n  async dragAndDrop(params: channels.FrameDragAndDropParams, metadata: CallMetadata): Promise<void> {\n    return await this._frame.dragAndDrop(metadata, params.source, params.target, params);\n  }\n\n  async tap(params: channels.FrameTapParams, metadata: CallMetadata): Promise<void> {\n    return await this._frame.tap(metadata, params.selector, params);\n  }\n\n  async fill(params: channels.FrameFillParams, metadata: CallMetadata): Promise<void> {\n    return await this._frame.fill(metadata, params.selector, params.value, params);\n  }\n\n  async focus(params: channels.FrameFocusParams, metadata: CallMetadata): Promise<void> {\n    await this._frame.focus(metadata, params.selector, params);\n  }\n\n  async textContent(params: channels.FrameTextContentParams, metadata: CallMetadata): Promise<channels.FrameTextContentResult> {\n    const value = await this._frame.textContent(metadata, params.selector, params);\n    return { value: value === null ? undefined : value };\n  }\n\n  async innerText(params: channels.FrameInnerTextParams, metadata: CallMetadata): Promise<channels.FrameInnerTextResult> {\n    return { value: await this._frame.innerText(metadata, params.selector, params) };\n  }\n\n  async innerHTML(params: channels.FrameInnerHTMLParams, metadata: CallMetadata): Promise<channels.FrameInnerHTMLResult> {\n    return { value: await this._frame.innerHTML(metadata, params.selector, params) };\n  }\n\n  async getAttribute(params: channels.FrameGetAttributeParams, metadata: CallMetadata): Promise<channels.FrameGetAttributeResult> {\n    const value = await this._frame.getAttribute(metadata, params.selector, params.name, params);\n    return { value: value === null ? undefined : value };\n  }\n\n  async inputValue(params: channels.FrameInputValueParams, metadata: CallMetadata): Promise<channels.FrameInputValueResult> {\n    const value = await this._frame.inputValue(metadata, params.selector, params);\n    return { value };\n  }\n\n  async isChecked(params: channels.FrameIsCheckedParams, metadata: CallMetadata): Promise<channels.FrameIsCheckedResult> {\n    return { value: await this._frame.isChecked(metadata, params.selector, params) };\n  }\n\n  async isDisabled(params: channels.FrameIsDisabledParams, metadata: CallMetadata): Promise<channels.FrameIsDisabledResult> {\n    return { value: await this._frame.isDisabled(metadata, params.selector, params) };\n  }\n\n  async isEditable(params: channels.FrameIsEditableParams, metadata: CallMetadata): Promise<channels.FrameIsEditableResult> {\n    return { value: await this._frame.isEditable(metadata, params.selector, params) };\n  }\n\n  async isEnabled(params: channels.FrameIsEnabledParams, metadata: CallMetadata): Promise<channels.FrameIsEnabledResult> {\n    return { value: await this._frame.isEnabled(metadata, params.selector, params) };\n  }\n\n  async isHidden(params: channels.FrameIsHiddenParams, metadata: CallMetadata): Promise<channels.FrameIsHiddenResult> {\n    return { value: await this._frame.isHidden(metadata, params.selector, params) };\n  }\n\n  async isVisible(params: channels.FrameIsVisibleParams, metadata: CallMetadata): Promise<channels.FrameIsVisibleResult> {\n    return { value: await this._frame.isVisible(metadata, params.selector, params) };\n  }\n\n  async hover(params: channels.FrameHoverParams, metadata: CallMetadata): Promise<void> {\n    return await this._frame.hover(metadata, params.selector, params);\n  }\n\n  async selectOption(params: channels.FrameSelectOptionParams, metadata: CallMetadata): Promise<channels.FrameSelectOptionResult> {\n    const elements = (params.elements || []).map(e => (e as ElementHandleDispatcher)._elementHandle);\n    return { values: await this._frame.selectOption(metadata, params.selector, elements, params.options || [], params) };\n  }\n\n  async setInputFiles(params: channels.FrameSetInputFilesParams, metadata: CallMetadata): Promise<void> {\n    return await this._frame.setInputFiles(metadata, params.selector, params.files, params);\n  }\n\n  async type(params: channels.FrameTypeParams, metadata: CallMetadata): Promise<void> {\n    return await this._frame.type(metadata, params.selector, params.text, params);\n  }\n\n  async press(params: channels.FramePressParams, metadata: CallMetadata): Promise<void> {\n    return await this._frame.press(metadata, params.selector, params.key, params);\n  }\n\n  async check(params: channels.FrameCheckParams, metadata: CallMetadata): Promise<void> {\n    return await this._frame.check(metadata, params.selector, params);\n  }\n\n  async uncheck(params: channels.FrameUncheckParams, metadata: CallMetadata): Promise<void> {\n    return await this._frame.uncheck(metadata, params.selector, params);\n  }\n\n  async waitForFunction(params: channels.FrameWaitForFunctionParams, metadata: CallMetadata): Promise<channels.FrameWaitForFunctionResult> {\n    return { handle: ElementHandleDispatcher.fromJSHandle(this._scope, await this._frame._waitForFunctionExpression(metadata, params.expression, params.isFunction, parseArgument(params.arg), params)) };\n  }\n\n  async title(params: channels.FrameTitleParams, metadata: CallMetadata): Promise<channels.FrameTitleResult> {\n    return { value: await this._frame.title() };\n  }\n}\n"],"file":"frameDispatcher.js"}