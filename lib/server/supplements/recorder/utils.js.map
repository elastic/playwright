{"version":3,"sources":["../../../../src/server/supplements/recorder/utils.ts"],"names":["toClickOptions","action","method","clickCount","modifiers","toModifiers","options","button","length","result","push","describeFrame","frame","page","_page","mainFrame","isMainFrame","frameUrl","url","frames","filter","f","name","frameName"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAOO,SAASA,cAAT,CAAwBC,MAAxB,EAAmH;AACxH,MAAIC,MAA4B,GAAG,OAAnC;AACA,MAAID,MAAM,CAACE,UAAP,KAAsB,CAA1B,EACED,MAAM,GAAG,UAAT;AACF,QAAME,SAAS,GAAGC,WAAW,CAACJ,MAAM,CAACG,SAAR,CAA7B;AACA,QAAME,OAA0B,GAAG,EAAnC;AACA,MAAIL,MAAM,CAACM,MAAP,KAAkB,MAAtB,EACED,OAAO,CAACC,MAAR,GAAiBN,MAAM,CAACM,MAAxB;AACF,MAAIH,SAAS,CAACI,MAAd,EACEF,OAAO,CAACF,SAAR,GAAoBA,SAApB;AACF,MAAIH,MAAM,CAACE,UAAP,GAAoB,CAAxB,EACEG,OAAO,CAACH,UAAR,GAAqBF,MAAM,CAACE,UAA5B;AACF,SAAO;AAAED,IAAAA,MAAF;AAAUI,IAAAA;AAAV,GAAP;AACD;;AAEM,SAASD,WAAT,CAAqBD,SAArB,EAAkF;AACvF,QAAMK,MAAgD,GAAG,EAAzD;AACA,MAAIL,SAAS,GAAG,CAAhB,EACEK,MAAM,CAACC,IAAP,CAAY,KAAZ;AACF,MAAIN,SAAS,GAAG,CAAhB,EACEK,MAAM,CAACC,IAAP,CAAY,SAAZ;AACF,MAAIN,SAAS,GAAG,CAAhB,EACEK,MAAM,CAACC,IAAP,CAAY,MAAZ;AACF,MAAIN,SAAS,GAAG,CAAhB,EACEK,MAAM,CAACC,IAAP,CAAY,OAAZ;AACF,SAAOD,MAAP;AACD;;AAEM,SAASE,aAAT,CAAuBC,KAAvB,EAAqG;AAC1G,QAAMC,IAAI,GAAGD,KAAK,CAACE,KAAnB;AACA,MAAID,IAAI,CAACE,SAAL,OAAqBH,KAAzB,EACE,OAAO;AAAEI,IAAAA,WAAW,EAAE,IAAf;AAAqBC,IAAAA,QAAQ,EAAEL,KAAK,CAACM,GAAN;AAA/B,GAAP;AACF,QAAMC,MAAM,GAAGN,IAAI,CAACM,MAAL,GAAcC,MAAd,CAAqBC,CAAC,IAAIA,CAAC,CAACC,IAAF,OAAaV,KAAK,CAACU,IAAN,EAAvC,CAAf;AACA,MAAIH,MAAM,CAACX,MAAP,KAAkB,CAAlB,IAAuBW,MAAM,CAAC,CAAD,CAAN,KAAcP,KAAzC,EACE,OAAO;AAAEI,IAAAA,WAAW,EAAE,KAAf;AAAsBC,IAAAA,QAAQ,EAAEL,KAAK,CAACM,GAAN,EAAhC;AAA6CK,IAAAA,SAAS,EAAEX,KAAK,CAACU,IAAN;AAAxD,GAAP;AACF,SAAO;AAAEN,IAAAA,WAAW,EAAE,KAAf;AAAsBC,IAAAA,QAAQ,EAAEL,KAAK,CAACM,GAAN;AAAhC,GAAP;AACD","sourcesContent":["/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Frame } from '../../frames';\nimport * as actions from './recorderActions';\n\nexport type MouseClickOptions = Parameters<Frame['click']>[2];\n\nexport function toClickOptions(action: actions.ClickAction): { method: 'click' | 'dblclick', options: MouseClickOptions } {\n  let method: 'click' | 'dblclick' = 'click';\n  if (action.clickCount === 2)\n    method = 'dblclick';\n  const modifiers = toModifiers(action.modifiers);\n  const options: MouseClickOptions = {};\n  if (action.button !== 'left')\n    options.button = action.button;\n  if (modifiers.length)\n    options.modifiers = modifiers;\n  if (action.clickCount > 2)\n    options.clickCount = action.clickCount;\n  return { method, options };\n}\n\nexport function toModifiers(modifiers: number): ('Alt' | 'Control' | 'Meta' | 'Shift')[] {\n  const result: ('Alt' | 'Control' | 'Meta' | 'Shift')[] = [];\n  if (modifiers & 1)\n    result.push('Alt');\n  if (modifiers & 2)\n    result.push('Control');\n  if (modifiers & 4)\n    result.push('Meta');\n  if (modifiers & 8)\n    result.push('Shift');\n  return result;\n}\n\nexport function describeFrame(frame: Frame): { frameName?: string, frameUrl: string, isMainFrame: boolean } {\n  const page = frame._page;\n  if (page.mainFrame() === frame)\n    return { isMainFrame: true, frameUrl: frame.url() };\n  const frames = page.frames().filter(f => f.name() === frame.name());\n  if (frames.length === 1 && frames[0] === frame)\n    return { isMainFrame: false, frameUrl: frame.url(), frameName: frame.name() };\n  return { isMainFrame: false, frameUrl: frame.url() };\n}\n"],"file":"utils.js"}