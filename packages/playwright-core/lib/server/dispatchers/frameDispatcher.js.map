{"version":3,"file":"frameDispatcher.js","names":["_frames","require","_dispatcher","_elementHandlerDispatcher","_jsHandleDispatcher","_networkDispatchers","_utils","FrameDispatcher","Dispatcher","from","scope","frame","result","existingDispatcher","fromNullable","constructor","debugAssert","_page","mainFrame","gcBucket","pageDispatcher","url","name","parentFrame","loadStates","Array","_firedLifecycleEvents","_type_Frame","_frame","_browserContextDispatcher","addObjectListener","Frame","Events","AddLifecycle","lifecycleEvent","_dispatchEvent","add","RemoveLifecycle","remove","InternalNavigation","event","isPublic","params","error","message","undefined","newDocument","request","RequestDispatcher","goto","metadata","response","ResponseDispatcher","frameElement","element","ElementHandleDispatcher","evaluateExpression","value","serializeResult","expression","isFunction","parseArgument","arg","evaluateExpressionHandle","handle","fromJSHandle","waitForSelector","selector","dispatchEvent","type","eventInit","evalOnSelector","strict","evalOnSelectorAll","querySelector","querySelectorAll","elements","map","e","queryCount","content","setContent","html","addScriptTag","addStyleTag","click","potentiallyClosesScope","dblclick","dragAndDrop","source","target","tap","fill","focus","blur","textContent","innerText","innerHTML","getAttribute","inputValue","isChecked","isDisabled","isEditable","isEnabled","isHidden","isVisible","hover","selectOption","_elementHandle","values","options","setInputFiles","text","press","key","check","uncheck","waitForTimeout","timeout","waitForFunction","_waitForFunctionExpression","title","highlight","expect","expectedValue","received","exports"],"sources":["../../../src/server/dispatchers/frameDispatcher.ts"],"sourcesContent":["/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { NavigationEvent } from '../frames';\nimport { Frame } from '../frames';\nimport type * as channels from '@protocol/channels';\nimport { Dispatcher, existingDispatcher } from './dispatcher';\nimport { ElementHandleDispatcher } from './elementHandlerDispatcher';\nimport { parseArgument, serializeResult } from './jsHandleDispatcher';\nimport { ResponseDispatcher } from './networkDispatchers';\nimport { RequestDispatcher } from './networkDispatchers';\nimport type { CallMetadata } from '../instrumentation';\nimport type { BrowserContextDispatcher } from './browserContextDispatcher';\nimport type { PageDispatcher } from './pageDispatcher';\nimport { debugAssert } from '../../utils';\n\nexport class FrameDispatcher extends Dispatcher<Frame, channels.FrameChannel, BrowserContextDispatcher | PageDispatcher> implements channels.FrameChannel {\n  _type_Frame = true;\n  private _frame: Frame;\n  private _browserContextDispatcher: BrowserContextDispatcher;\n\n  static from(scope: BrowserContextDispatcher, frame: Frame): FrameDispatcher {\n    const result = existingDispatcher<FrameDispatcher>(frame);\n    return result || new FrameDispatcher(scope, frame);\n  }\n\n  static fromNullable(scope: BrowserContextDispatcher, frame: Frame | null): FrameDispatcher | undefined {\n    if (!frame)\n      return;\n    return FrameDispatcher.from(scope, frame);\n  }\n\n  private constructor(scope: BrowserContextDispatcher, frame: Frame) {\n    // Main frames are gc'ed separately from any other frames, so that\n    // methods on Page that redirect to the main frame remain operational.\n    // Note: we cannot check parentFrame() here because it may be null after the frame has been detached.\n    debugAssert(frame._page.mainFrame(), 'Cannot determine whether the frame is a main frame');\n    const gcBucket = frame._page.mainFrame() === frame ? 'MainFrame' : 'Frame';\n    const pageDispatcher = existingDispatcher<PageDispatcher>(frame._page);\n    super(pageDispatcher || scope, frame, 'Frame', {\n      url: frame.url(),\n      name: frame.name(),\n      parentFrame: FrameDispatcher.fromNullable(scope, frame.parentFrame()),\n      loadStates: Array.from(frame._firedLifecycleEvents),\n    }, gcBucket);\n    this._browserContextDispatcher = scope;\n    this._frame = frame;\n    this.addObjectListener(Frame.Events.AddLifecycle, lifecycleEvent => {\n      this._dispatchEvent('loadstate', { add: lifecycleEvent });\n    });\n    this.addObjectListener(Frame.Events.RemoveLifecycle, lifecycleEvent => {\n      this._dispatchEvent('loadstate', { remove: lifecycleEvent });\n    });\n    this.addObjectListener(Frame.Events.InternalNavigation, (event: NavigationEvent) => {\n      if (!event.isPublic)\n        return;\n      const params = { url: event.url, name: event.name, error: event.error ? event.error.message : undefined };\n      if (event.newDocument)\n        (params as any).newDocument = { request: RequestDispatcher.fromNullable(this._browserContextDispatcher, event.newDocument.request || null) };\n      this._dispatchEvent('navigated', params);\n    });\n  }\n\n  async goto(params: channels.FrameGotoParams, metadata: CallMetadata): Promise<channels.FrameGotoResult> {\n    return { response: ResponseDispatcher.fromNullable(this._browserContextDispatcher, await this._frame.goto(metadata, params.url, params)) };\n  }\n\n  async frameElement(): Promise<channels.FrameFrameElementResult> {\n    return { element: ElementHandleDispatcher.from(this, await this._frame.frameElement()) };\n  }\n\n  async evaluateExpression(params: channels.FrameEvaluateExpressionParams, metadata: CallMetadata): Promise<channels.FrameEvaluateExpressionResult> {\n    return { value: serializeResult(await this._frame.evaluateExpression(params.expression, { isFunction: params.isFunction }, parseArgument(params.arg))) };\n  }\n\n  async evaluateExpressionHandle(params: channels.FrameEvaluateExpressionHandleParams, metadata: CallMetadata): Promise<channels.FrameEvaluateExpressionHandleResult> {\n    return { handle: ElementHandleDispatcher.fromJSHandle(this, await this._frame.evaluateExpressionHandle(params.expression, { isFunction: params.isFunction }, parseArgument(params.arg))) };\n  }\n\n  async waitForSelector(params: channels.FrameWaitForSelectorParams, metadata: CallMetadata): Promise<channels.FrameWaitForSelectorResult> {\n    return { element: ElementHandleDispatcher.fromNullable(this, await this._frame.waitForSelector(metadata, params.selector, params)) };\n  }\n\n  async dispatchEvent(params: channels.FrameDispatchEventParams, metadata: CallMetadata): Promise<void> {\n    return this._frame.dispatchEvent(metadata, params.selector, params.type, parseArgument(params.eventInit), params);\n  }\n\n  async evalOnSelector(params: channels.FrameEvalOnSelectorParams, metadata: CallMetadata): Promise<channels.FrameEvalOnSelectorResult> {\n    return { value: serializeResult(await this._frame.evalOnSelector(params.selector, !!params.strict, params.expression, params.isFunction, parseArgument(params.arg))) };\n  }\n\n  async evalOnSelectorAll(params: channels.FrameEvalOnSelectorAllParams, metadata: CallMetadata): Promise<channels.FrameEvalOnSelectorAllResult> {\n    return { value: serializeResult(await this._frame.evalOnSelectorAll(params.selector, params.expression, params.isFunction, parseArgument(params.arg))) };\n  }\n\n  async querySelector(params: channels.FrameQuerySelectorParams, metadata: CallMetadata): Promise<channels.FrameQuerySelectorResult> {\n    return { element: ElementHandleDispatcher.fromNullable(this, await this._frame.querySelector(params.selector, params)) };\n  }\n\n  async querySelectorAll(params: channels.FrameQuerySelectorAllParams, metadata: CallMetadata): Promise<channels.FrameQuerySelectorAllResult> {\n    const elements = await this._frame.querySelectorAll(params.selector);\n    return { elements: elements.map(e => ElementHandleDispatcher.from(this, e)) };\n  }\n\n  async queryCount(params: channels.FrameQueryCountParams): Promise<channels.FrameQueryCountResult> {\n    return { value: await this._frame.queryCount(params.selector) };\n  }\n\n  async content(): Promise<channels.FrameContentResult> {\n    return { value: await this._frame.content() };\n  }\n\n  async setContent(params: channels.FrameSetContentParams, metadata: CallMetadata): Promise<void> {\n    return await this._frame.setContent(metadata, params.html, params);\n  }\n\n  async addScriptTag(params: channels.FrameAddScriptTagParams, metadata: CallMetadata): Promise<channels.FrameAddScriptTagResult> {\n    return { element: ElementHandleDispatcher.from(this, await this._frame.addScriptTag(params)) };\n  }\n\n  async addStyleTag(params: channels.FrameAddStyleTagParams, metadata: CallMetadata): Promise<channels.FrameAddStyleTagResult> {\n    return { element: ElementHandleDispatcher.from(this, await this._frame.addStyleTag(params)) };\n  }\n\n  async click(params: channels.FrameClickParams, metadata: CallMetadata): Promise<void> {\n    metadata.potentiallyClosesScope = true;\n    return await this._frame.click(metadata, params.selector, params);\n  }\n\n  async dblclick(params: channels.FrameDblclickParams, metadata: CallMetadata): Promise<void> {\n    return await this._frame.dblclick(metadata, params.selector, params);\n  }\n\n  async dragAndDrop(params: channels.FrameDragAndDropParams, metadata: CallMetadata): Promise<void> {\n    return await this._frame.dragAndDrop(metadata, params.source, params.target, params);\n  }\n\n  async tap(params: channels.FrameTapParams, metadata: CallMetadata): Promise<void> {\n    return await this._frame.tap(metadata, params.selector, params);\n  }\n\n  async fill(params: channels.FrameFillParams, metadata: CallMetadata): Promise<void> {\n    return await this._frame.fill(metadata, params.selector, params.value, params);\n  }\n\n  async focus(params: channels.FrameFocusParams, metadata: CallMetadata): Promise<void> {\n    await this._frame.focus(metadata, params.selector, params);\n  }\n\n  async blur(params: channels.FrameBlurParams, metadata: CallMetadata): Promise<void> {\n    await this._frame.blur(metadata, params.selector, params);\n  }\n\n  async textContent(params: channels.FrameTextContentParams, metadata: CallMetadata): Promise<channels.FrameTextContentResult> {\n    const value = await this._frame.textContent(metadata, params.selector, params);\n    return { value: value === null ? undefined : value };\n  }\n\n  async innerText(params: channels.FrameInnerTextParams, metadata: CallMetadata): Promise<channels.FrameInnerTextResult> {\n    return { value: await this._frame.innerText(metadata, params.selector, params) };\n  }\n\n  async innerHTML(params: channels.FrameInnerHTMLParams, metadata: CallMetadata): Promise<channels.FrameInnerHTMLResult> {\n    return { value: await this._frame.innerHTML(metadata, params.selector, params) };\n  }\n\n  async getAttribute(params: channels.FrameGetAttributeParams, metadata: CallMetadata): Promise<channels.FrameGetAttributeResult> {\n    const value = await this._frame.getAttribute(metadata, params.selector, params.name, params);\n    return { value: value === null ? undefined : value };\n  }\n\n  async inputValue(params: channels.FrameInputValueParams, metadata: CallMetadata): Promise<channels.FrameInputValueResult> {\n    const value = await this._frame.inputValue(metadata, params.selector, params);\n    return { value };\n  }\n\n  async isChecked(params: channels.FrameIsCheckedParams, metadata: CallMetadata): Promise<channels.FrameIsCheckedResult> {\n    return { value: await this._frame.isChecked(metadata, params.selector, params) };\n  }\n\n  async isDisabled(params: channels.FrameIsDisabledParams, metadata: CallMetadata): Promise<channels.FrameIsDisabledResult> {\n    return { value: await this._frame.isDisabled(metadata, params.selector, params) };\n  }\n\n  async isEditable(params: channels.FrameIsEditableParams, metadata: CallMetadata): Promise<channels.FrameIsEditableResult> {\n    return { value: await this._frame.isEditable(metadata, params.selector, params) };\n  }\n\n  async isEnabled(params: channels.FrameIsEnabledParams, metadata: CallMetadata): Promise<channels.FrameIsEnabledResult> {\n    return { value: await this._frame.isEnabled(metadata, params.selector, params) };\n  }\n\n  async isHidden(params: channels.FrameIsHiddenParams, metadata: CallMetadata): Promise<channels.FrameIsHiddenResult> {\n    return { value: await this._frame.isHidden(metadata, params.selector, params) };\n  }\n\n  async isVisible(params: channels.FrameIsVisibleParams, metadata: CallMetadata): Promise<channels.FrameIsVisibleResult> {\n    return { value: await this._frame.isVisible(metadata, params.selector, params) };\n  }\n\n  async hover(params: channels.FrameHoverParams, metadata: CallMetadata): Promise<void> {\n    return await this._frame.hover(metadata, params.selector, params);\n  }\n\n  async selectOption(params: channels.FrameSelectOptionParams, metadata: CallMetadata): Promise<channels.FrameSelectOptionResult> {\n    const elements = (params.elements || []).map(e => (e as ElementHandleDispatcher)._elementHandle);\n    return { values: await this._frame.selectOption(metadata, params.selector, elements, params.options || [], params) };\n  }\n\n  async setInputFiles(params: channels.FrameSetInputFilesParams, metadata: CallMetadata): Promise<channels.FrameSetInputFilesResult> {\n    return await this._frame.setInputFiles(metadata, params.selector, params);\n  }\n\n  async type(params: channels.FrameTypeParams, metadata: CallMetadata): Promise<void> {\n    return await this._frame.type(metadata, params.selector, params.text, params);\n  }\n\n  async press(params: channels.FramePressParams, metadata: CallMetadata): Promise<void> {\n    return await this._frame.press(metadata, params.selector, params.key, params);\n  }\n\n  async check(params: channels.FrameCheckParams, metadata: CallMetadata): Promise<void> {\n    return await this._frame.check(metadata, params.selector, params);\n  }\n\n  async uncheck(params: channels.FrameUncheckParams, metadata: CallMetadata): Promise<void> {\n    return await this._frame.uncheck(metadata, params.selector, params);\n  }\n\n  async waitForTimeout(params: channels.FrameWaitForTimeoutParams, metadata: CallMetadata): Promise<void> {\n    return await this._frame.waitForTimeout(metadata, params.timeout);\n  }\n\n  async waitForFunction(params: channels.FrameWaitForFunctionParams, metadata: CallMetadata): Promise<channels.FrameWaitForFunctionResult> {\n    return { handle: ElementHandleDispatcher.fromJSHandle(this, await this._frame._waitForFunctionExpression(metadata, params.expression, params.isFunction, parseArgument(params.arg), params)) };\n  }\n\n  async title(params: channels.FrameTitleParams, metadata: CallMetadata): Promise<channels.FrameTitleResult> {\n    return { value: await this._frame.title() };\n  }\n\n  async highlight(params: channels.FrameHighlightParams, metadata: CallMetadata): Promise<void> {\n    return await this._frame.highlight(params.selector);\n  }\n\n  async expect(params: channels.FrameExpectParams, metadata: CallMetadata): Promise<channels.FrameExpectResult> {\n    metadata.potentiallyClosesScope = true;\n    const expectedValue = params.expectedValue ? parseArgument(params.expectedValue) : undefined;\n    const result = await this._frame.expect(metadata, params.selector, { ...params, expectedValue });\n    if (result.received !== undefined)\n      result.received = serializeResult(result.received);\n    return result;\n  }\n}\n"],"mappings":"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"}