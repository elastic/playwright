{"version":3,"file":"elementHandlerDispatcher.js","names":["_dispatcher","require","_jsHandleDispatcher","_frameDispatcher","_browserContextDispatcher","_pageDispatcher","ElementHandleDispatcher","JSHandleDispatcher","from","scope","handle","existingDispatcher","fromNullable","undefined","fromJSHandle","result","asElement","constructor","elementHandle","_type_ElementHandle","_elementHandle","ownerFrame","params","metadata","frame","FrameDispatcher","contentFrame","getAttribute","value","name","inputValue","textContent","innerText","innerHTML","isChecked","isDisabled","isEditable","isEnabled","isHidden","isVisible","dispatchEvent","type","parseArgument","eventInit","scrollIntoViewIfNeeded","hover","click","dblclick","tap","selectOption","elements","map","e","values","options","fill","selectText","setInputFiles","focus","text","press","key","check","uncheck","boundingBox","screenshot","mask","selector","_object","binary","querySelector","element","parentScope","querySelectorAll","evalOnSelector","serializeResult","strict","expression","isFunction","arg","evalOnSelectorAll","waitForElementState","state","waitForSelector","BrowserContextDispatcher","PageDispatcher","WorkerDispatcher","Error","exports"],"sources":["../../../src/server/dispatchers/elementHandlerDispatcher.ts"],"sourcesContent":["/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { ElementHandle } from '../dom';\nimport type { Frame } from '../frames';\nimport type * as js from '../javascript';\nimport type * as channels from '@protocol/channels';\nimport { existingDispatcher } from './dispatcher';\nimport { JSHandleDispatcher, serializeResult, parseArgument } from './jsHandleDispatcher';\nimport type { JSHandleDispatcherParentScope } from './jsHandleDispatcher';\nimport { FrameDispatcher } from './frameDispatcher';\nimport type { CallMetadata } from '../instrumentation';\nimport { BrowserContextDispatcher } from './browserContextDispatcher';\nimport { PageDispatcher, WorkerDispatcher } from './pageDispatcher';\n\nexport class ElementHandleDispatcher extends JSHandleDispatcher implements channels.ElementHandleChannel {\n  _type_ElementHandle = true;\n\n  readonly _elementHandle: ElementHandle;\n\n  static from(scope: JSHandleDispatcherParentScope, handle: ElementHandle): ElementHandleDispatcher {\n    return existingDispatcher<ElementHandleDispatcher>(handle) || new ElementHandleDispatcher(scope, handle);\n  }\n\n  static fromNullable(scope: JSHandleDispatcherParentScope, handle: ElementHandle | null): ElementHandleDispatcher | undefined {\n    if (!handle)\n      return undefined;\n    return existingDispatcher<ElementHandleDispatcher>(handle) || new ElementHandleDispatcher(scope, handle);\n  }\n\n  static fromJSHandle(scope: JSHandleDispatcherParentScope, handle: js.JSHandle): JSHandleDispatcher {\n    const result = existingDispatcher<JSHandleDispatcher>(handle);\n    if (result)\n      return result;\n    return handle.asElement() ? new ElementHandleDispatcher(scope, handle.asElement()!) : new JSHandleDispatcher(scope, handle);\n  }\n\n  private constructor(scope: JSHandleDispatcherParentScope, elementHandle: ElementHandle) {\n    super(scope, elementHandle);\n    this._elementHandle = elementHandle;\n  }\n\n  async ownerFrame(params: channels.ElementHandleOwnerFrameParams, metadata: CallMetadata): Promise<channels.ElementHandleOwnerFrameResult> {\n    const frame = await this._elementHandle.ownerFrame();\n    return { frame: frame ? FrameDispatcher.from(this._browserContextDispatcher(), frame) : undefined };\n  }\n\n  async contentFrame(params: channels.ElementHandleContentFrameParams, metadata: CallMetadata): Promise<channels.ElementHandleContentFrameResult> {\n    const frame = await this._elementHandle.contentFrame();\n    return { frame: frame ? FrameDispatcher.from(this._browserContextDispatcher(), frame) : undefined };\n  }\n\n  async getAttribute(params: channels.ElementHandleGetAttributeParams, metadata: CallMetadata): Promise<channels.ElementHandleGetAttributeResult> {\n    const value = await this._elementHandle.getAttribute(metadata, params.name);\n    return { value: value === null ? undefined : value };\n  }\n\n  async inputValue(params: channels.ElementHandleInputValueParams, metadata: CallMetadata): Promise<channels.ElementHandleInputValueResult> {\n    const value = await this._elementHandle.inputValue(metadata);\n    return { value };\n  }\n\n  async textContent(params: channels.ElementHandleTextContentParams, metadata: CallMetadata): Promise<channels.ElementHandleTextContentResult> {\n    const value = await this._elementHandle.textContent(metadata);\n    return { value: value === null ? undefined : value };\n  }\n\n  async innerText(params: channels.ElementHandleInnerTextParams, metadata: CallMetadata): Promise<channels.ElementHandleInnerTextResult> {\n    return { value: await this._elementHandle.innerText(metadata) };\n  }\n\n  async innerHTML(params: channels.ElementHandleInnerHTMLParams, metadata: CallMetadata): Promise<channels.ElementHandleInnerHTMLResult> {\n    return { value: await this._elementHandle.innerHTML(metadata) };\n  }\n\n  async isChecked(params: channels.ElementHandleIsCheckedParams, metadata: CallMetadata): Promise<channels.ElementHandleIsCheckedResult> {\n    return { value: await this._elementHandle.isChecked(metadata) };\n  }\n\n  async isDisabled(params: channels.ElementHandleIsDisabledParams, metadata: CallMetadata): Promise<channels.ElementHandleIsDisabledResult> {\n    return { value: await this._elementHandle.isDisabled(metadata) };\n  }\n\n  async isEditable(params: channels.ElementHandleIsEditableParams, metadata: CallMetadata): Promise<channels.ElementHandleIsEditableResult> {\n    return { value: await this._elementHandle.isEditable(metadata) };\n  }\n\n  async isEnabled(params: channels.ElementHandleIsEnabledParams, metadata: CallMetadata): Promise<channels.ElementHandleIsEnabledResult> {\n    return { value: await this._elementHandle.isEnabled(metadata) };\n  }\n\n  async isHidden(params: channels.ElementHandleIsHiddenParams, metadata: CallMetadata): Promise<channels.ElementHandleIsHiddenResult> {\n    return { value: await this._elementHandle.isHidden(metadata) };\n  }\n\n  async isVisible(params: channels.ElementHandleIsVisibleParams, metadata: CallMetadata): Promise<channels.ElementHandleIsVisibleResult> {\n    return { value: await this._elementHandle.isVisible(metadata) };\n  }\n\n  async dispatchEvent(params: channels.ElementHandleDispatchEventParams, metadata: CallMetadata): Promise<void> {\n    await this._elementHandle.dispatchEvent(metadata, params.type, parseArgument(params.eventInit));\n  }\n\n  async scrollIntoViewIfNeeded(params: channels.ElementHandleScrollIntoViewIfNeededParams, metadata: CallMetadata): Promise<void> {\n    await this._elementHandle.scrollIntoViewIfNeeded(metadata, params);\n  }\n\n  async hover(params: channels.ElementHandleHoverParams, metadata: CallMetadata): Promise<void> {\n    return await this._elementHandle.hover(metadata, params);\n  }\n\n  async click(params: channels.ElementHandleClickParams, metadata: CallMetadata): Promise<void> {\n    return await this._elementHandle.click(metadata, params);\n  }\n\n  async dblclick(params: channels.ElementHandleDblclickParams, metadata: CallMetadata): Promise<void> {\n    return await this._elementHandle.dblclick(metadata, params);\n  }\n\n  async tap(params: channels.ElementHandleTapParams, metadata: CallMetadata): Promise<void> {\n    return await this._elementHandle.tap(metadata, params);\n  }\n\n  async selectOption(params: channels.ElementHandleSelectOptionParams, metadata: CallMetadata): Promise<channels.ElementHandleSelectOptionResult> {\n    const elements = (params.elements || []).map(e => (e as ElementHandleDispatcher)._elementHandle);\n    return { values: await this._elementHandle.selectOption(metadata, elements, params.options || [], params) };\n  }\n\n  async fill(params: channels.ElementHandleFillParams, metadata: CallMetadata): Promise<void> {\n    return await this._elementHandle.fill(metadata, params.value, params);\n  }\n\n  async selectText(params: channels.ElementHandleSelectTextParams, metadata: CallMetadata): Promise<void> {\n    await this._elementHandle.selectText(metadata, params);\n  }\n\n  async setInputFiles(params: channels.ElementHandleSetInputFilesParams, metadata: CallMetadata): Promise<void> {\n    return await this._elementHandle.setInputFiles(metadata, params);\n  }\n\n  async focus(params: channels.ElementHandleFocusParams, metadata: CallMetadata): Promise<void> {\n    await this._elementHandle.focus(metadata);\n  }\n\n  async type(params: channels.ElementHandleTypeParams, metadata: CallMetadata): Promise<void> {\n    return await this._elementHandle.type(metadata, params.text, params);\n  }\n\n  async press(params: channels.ElementHandlePressParams, metadata: CallMetadata): Promise<void> {\n    return await this._elementHandle.press(metadata, params.key, params);\n  }\n\n  async check(params: channels.ElementHandleCheckParams, metadata: CallMetadata): Promise<void> {\n    return await this._elementHandle.check(metadata, params);\n  }\n\n  async uncheck(params: channels.ElementHandleUncheckParams, metadata: CallMetadata): Promise<void> {\n    return await this._elementHandle.uncheck(metadata, params);\n  }\n\n  async boundingBox(params: channels.ElementHandleBoundingBoxParams, metadata: CallMetadata): Promise<channels.ElementHandleBoundingBoxResult> {\n    const value = await this._elementHandle.boundingBox();\n    return { value: value || undefined };\n  }\n\n  async screenshot(params: channels.ElementHandleScreenshotParams, metadata: CallMetadata): Promise<channels.ElementHandleScreenshotResult> {\n    const mask: { frame: Frame, selector: string }[] = (params.mask || []).map(({ frame, selector }) => ({\n      frame: (frame as FrameDispatcher)._object,\n      selector,\n    }));\n    return { binary: await this._elementHandle.screenshot(metadata, { ...params, mask }) };\n  }\n\n  async querySelector(params: channels.ElementHandleQuerySelectorParams, metadata: CallMetadata): Promise<channels.ElementHandleQuerySelectorResult> {\n    const handle = await this._elementHandle.querySelector(params.selector, params);\n    return { element: ElementHandleDispatcher.fromNullable(this.parentScope(), handle) };\n  }\n\n  async querySelectorAll(params: channels.ElementHandleQuerySelectorAllParams, metadata: CallMetadata): Promise<channels.ElementHandleQuerySelectorAllResult> {\n    const elements = await this._elementHandle.querySelectorAll(params.selector);\n    return { elements: elements.map(e => ElementHandleDispatcher.from(this.parentScope(), e)) };\n  }\n\n  async evalOnSelector(params: channels.ElementHandleEvalOnSelectorParams, metadata: CallMetadata): Promise<channels.ElementHandleEvalOnSelectorResult> {\n    return { value: serializeResult(await this._elementHandle.evalOnSelector(params.selector, !!params.strict, params.expression, params.isFunction, parseArgument(params.arg))) };\n  }\n\n  async evalOnSelectorAll(params: channels.ElementHandleEvalOnSelectorAllParams, metadata: CallMetadata): Promise<channels.ElementHandleEvalOnSelectorAllResult> {\n    return { value: serializeResult(await this._elementHandle.evalOnSelectorAll(params.selector, params.expression, params.isFunction, parseArgument(params.arg))) };\n  }\n\n  async waitForElementState(params: channels.ElementHandleWaitForElementStateParams, metadata: CallMetadata): Promise<void> {\n    await this._elementHandle.waitForElementState(metadata, params.state, params);\n  }\n\n  async waitForSelector(params: channels.ElementHandleWaitForSelectorParams, metadata: CallMetadata): Promise<channels.ElementHandleWaitForSelectorResult> {\n    return { element: ElementHandleDispatcher.fromNullable(this.parentScope(), await this._elementHandle.waitForSelector(metadata, params.selector, params)) };\n  }\n\n  private _browserContextDispatcher(): BrowserContextDispatcher {\n    const scope = this.parentScope();\n    if (scope instanceof BrowserContextDispatcher)\n      return scope;\n    if (scope instanceof PageDispatcher)\n      return scope.parentScope();\n    if ((scope instanceof WorkerDispatcher) || (scope instanceof FrameDispatcher))  {\n      const parentScope = scope.parentScope();\n      if (parentScope instanceof BrowserContextDispatcher)\n        return parentScope;\n      return parentScope.parentScope();\n    }\n    throw new Error('ElementHandle belongs to unexpected scope');\n  }\n\n}\n"],"mappings":"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"}