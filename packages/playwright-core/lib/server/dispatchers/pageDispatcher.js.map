{"version":3,"file":"pageDispatcher.js","names":["_page","require","_dispatcher","_errors","_frameDispatcher","_networkDispatchers","_jsHandleDispatcher","_elementHandlerDispatcher","_artifactDispatcher","_utils","PageDispatcher","Dispatcher","from","parentScope","page","fromNullable","undefined","result","existingDispatcher","constructor","mainFrame","FrameDispatcher","viewportSize","isClosed","opener","_type_EventTarget","_type_Page","_subscriptions","Set","adopt","addObjectListener","Page","Events","Close","_dispatchEvent","_dispose","Crash","Download","download","url","suggestedFilename","artifact","ArtifactDispatcher","FileChooser","fileChooser","element","ElementHandleDispatcher","isMultiple","FrameAttached","frame","_onFrameAttached","FrameDetached","_onFrameDetached","LocatorHandlerTriggered","uid","WebSocket","webSocket","WebSocketDispatcher","Worker","worker","WorkerDispatcher","Video","_video","frames","_frameManager","i","length","setDefaultNavigationTimeoutNoReply","params","metadata","setDefaultNavigationTimeout","timeout","setDefaultTimeoutNoReply","setDefaultTimeout","exposeBinding","name","needsHandle","source","args","_disposed","binding","BindingCallDispatcher","promise","setExtraHTTPHeaders","headers","reload","response","ResponseDispatcher","goBack","goForward","registerLocatorHandler","selector","noWaitAfter","resolveLocatorHandlerNoReply","resolveLocatorHandler","remove","unregisterLocatorHandler","emulateMedia","media","colorScheme","reducedMotion","forcedColors","setViewportSize","addInitScript","setNetworkInterceptionPatterns","patterns","setClientRequestInterceptor","urlMatchers","map","pattern","regexSource","RegExp","regexFlags","glob","route","request","matchesSome","some","urlMatch","urlMatches","_browserContext","_options","baseURL","RouteDispatcher","RequestDispatcher","expectScreenshot","mask","_object","locator","screenshot","binary","close","runBeforeUnload","potentiallyClosesScope","updateSubscription","event","setFileChooserIntercepted","enabled","add","delete","keyboardDown","keyboard","down","key","keyboardUp","up","keyboardInsertText","insertText","text","keyboardType","type","keyboardPress","press","mouseMove","mouse","move","x","y","mouseDown","mouseUp","mouseClick","click","mouseWheel","wheel","deltaX","deltaY","touchscreenTap","touchscreen","tap","accessibilitySnapshot","rootAXNode","accessibility","snapshot","interestingOnly","root","_elementHandle","pdf","Error","buffer","bringToFront","startJSCoverage","coverage","stopJSCoverage","startCSSCoverage","stopCSSCoverage","_onDispose","isClosedOrClosingOrCrashed","catch","exports","scope","_type_Worker","evaluateExpression","value","serializeResult","expression","isFunction","parseArgument","arg","evaluateExpressionHandle","handle","fromJSHandle","guid","createGuid","_type_BindingCall","_resolve","_reject","_promise","Promise","resolve","reject","parseError","error"],"sources":["../../../src/server/dispatchers/pageDispatcher.ts"],"sourcesContent":["/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { BrowserContext } from '../browserContext';\nimport type { Frame } from '../frames';\nimport { Page, Worker } from '../page';\nimport type * as channels from '@protocol/channels';\nimport { Dispatcher, existingDispatcher } from './dispatcher';\nimport { parseError } from '../errors';\nimport { FrameDispatcher } from './frameDispatcher';\nimport { RequestDispatcher } from './networkDispatchers';\nimport { ResponseDispatcher } from './networkDispatchers';\nimport { RouteDispatcher, WebSocketDispatcher } from './networkDispatchers';\nimport { serializeResult, parseArgument } from './jsHandleDispatcher';\nimport { ElementHandleDispatcher } from './elementHandlerDispatcher';\nimport type { FileChooser } from '../fileChooser';\nimport type { CRCoverage } from '../chromium/crCoverage';\nimport type { JSHandle } from '../javascript';\nimport type { CallMetadata } from '../instrumentation';\nimport type { Artifact } from '../artifact';\nimport { ArtifactDispatcher } from './artifactDispatcher';\nimport type { Download } from '../download';\nimport { createGuid, urlMatches } from '../../utils';\nimport type { BrowserContextDispatcher } from './browserContextDispatcher';\n\nexport class PageDispatcher extends Dispatcher<Page, channels.PageChannel, BrowserContextDispatcher> implements channels.PageChannel {\n  _type_EventTarget = true;\n  _type_Page = true;\n  private _page: Page;\n  _subscriptions = new Set<channels.PageUpdateSubscriptionParams['event']>();\n\n  static from(parentScope: BrowserContextDispatcher, page: Page): PageDispatcher {\n    return PageDispatcher.fromNullable(parentScope, page)!;\n  }\n\n  static fromNullable(parentScope: BrowserContextDispatcher, page: Page | undefined): PageDispatcher | undefined {\n    if (!page)\n      return undefined;\n    const result = existingDispatcher<PageDispatcher>(page);\n    return result || new PageDispatcher(parentScope, page);\n  }\n\n  private constructor(parentScope: BrowserContextDispatcher, page: Page) {\n    // TODO: theoretically, there could be more than one frame already.\n    // If we split pageCreated and pageReady, there should be no main frame during pageCreated.\n\n    // We will reparent it to the page below using adopt.\n    const mainFrame = FrameDispatcher.from(parentScope, page.mainFrame());\n\n    super(parentScope, page, 'Page', {\n      mainFrame,\n      viewportSize: page.viewportSize() || undefined,\n      isClosed: page.isClosed(),\n      opener: PageDispatcher.fromNullable(parentScope, page.opener())\n    });\n\n    this.adopt(mainFrame);\n\n    this._page = page;\n    this.addObjectListener(Page.Events.Close, () => {\n      this._dispatchEvent('close');\n      this._dispose();\n    });\n    this.addObjectListener(Page.Events.Crash, () => this._dispatchEvent('crash'));\n    this.addObjectListener(Page.Events.Download, (download: Download) => {\n      // Artifact can outlive the page, so bind to the context scope.\n      this._dispatchEvent('download', { url: download.url, suggestedFilename: download.suggestedFilename(), artifact: ArtifactDispatcher.from(parentScope, download.artifact) });\n    });\n    this.addObjectListener(Page.Events.FileChooser, (fileChooser: FileChooser) => this._dispatchEvent('fileChooser', {\n      element: ElementHandleDispatcher.from(mainFrame, fileChooser.element()),\n      isMultiple: fileChooser.isMultiple()\n    }));\n    this.addObjectListener(Page.Events.FrameAttached, frame => this._onFrameAttached(frame));\n    this.addObjectListener(Page.Events.FrameDetached, frame => this._onFrameDetached(frame));\n    this.addObjectListener(Page.Events.LocatorHandlerTriggered, (uid: number) => this._dispatchEvent('locatorHandlerTriggered', { uid }));\n    this.addObjectListener(Page.Events.WebSocket, webSocket => this._dispatchEvent('webSocket', { webSocket: new WebSocketDispatcher(this, webSocket) }));\n    this.addObjectListener(Page.Events.Worker, worker => this._dispatchEvent('worker', { worker: new WorkerDispatcher(this, worker) }));\n    this.addObjectListener(Page.Events.Video, (artifact: Artifact) => this._dispatchEvent('video', { artifact: ArtifactDispatcher.from(parentScope, artifact) }));\n    if (page._video)\n      this._dispatchEvent('video', { artifact: ArtifactDispatcher.from(this.parentScope(), page._video) });\n    // Ensure client knows about all frames.\n    const frames = page._frameManager.frames();\n    for (let i = 1; i < frames.length; i++)\n      this._onFrameAttached(frames[i]);\n  }\n\n  page(): Page {\n    return this._page;\n  }\n\n  async setDefaultNavigationTimeoutNoReply(params: channels.PageSetDefaultNavigationTimeoutNoReplyParams, metadata: CallMetadata): Promise<void> {\n    this._page.setDefaultNavigationTimeout(params.timeout);\n  }\n\n  async setDefaultTimeoutNoReply(params: channels.PageSetDefaultTimeoutNoReplyParams, metadata: CallMetadata): Promise<void> {\n    this._page.setDefaultTimeout(params.timeout);\n  }\n\n  async exposeBinding(params: channels.PageExposeBindingParams, metadata: CallMetadata): Promise<void> {\n    await this._page.exposeBinding(params.name, !!params.needsHandle, (source, ...args) => {\n      // When reusing the context, we might have some bindings called late enough,\n      // after context and page dispatchers have been disposed.\n      if (this._disposed)\n        return;\n      const binding = new BindingCallDispatcher(this, params.name, !!params.needsHandle, source, args);\n      this._dispatchEvent('bindingCall', { binding });\n      return binding.promise();\n    });\n  }\n\n  async setExtraHTTPHeaders(params: channels.PageSetExtraHTTPHeadersParams, metadata: CallMetadata): Promise<void> {\n    await this._page.setExtraHTTPHeaders(params.headers);\n  }\n\n  async reload(params: channels.PageReloadParams, metadata: CallMetadata): Promise<channels.PageReloadResult> {\n    return { response: ResponseDispatcher.fromNullable(this.parentScope(), await this._page.reload(metadata, params)) };\n  }\n\n  async goBack(params: channels.PageGoBackParams, metadata: CallMetadata): Promise<channels.PageGoBackResult> {\n    return { response: ResponseDispatcher.fromNullable(this.parentScope(), await this._page.goBack(metadata, params)) };\n  }\n\n  async goForward(params: channels.PageGoForwardParams, metadata: CallMetadata): Promise<channels.PageGoForwardResult> {\n    return { response: ResponseDispatcher.fromNullable(this.parentScope(), await this._page.goForward(metadata, params)) };\n  }\n\n  async registerLocatorHandler(params: channels.PageRegisterLocatorHandlerParams, metadata: CallMetadata): Promise<channels.PageRegisterLocatorHandlerResult> {\n    const uid = this._page.registerLocatorHandler(params.selector, params.noWaitAfter);\n    return { uid };\n  }\n\n  async resolveLocatorHandlerNoReply(params: channels.PageResolveLocatorHandlerNoReplyParams, metadata: CallMetadata): Promise<void> {\n    this._page.resolveLocatorHandler(params.uid, params.remove);\n  }\n\n  async unregisterLocatorHandler(params: channels.PageUnregisterLocatorHandlerParams, metadata: CallMetadata): Promise<void> {\n    this._page.unregisterLocatorHandler(params.uid);\n  }\n\n  async emulateMedia(params: channels.PageEmulateMediaParams, metadata: CallMetadata): Promise<void> {\n    await this._page.emulateMedia({\n      media: params.media,\n      colorScheme: params.colorScheme,\n      reducedMotion: params.reducedMotion,\n      forcedColors: params.forcedColors,\n    });\n  }\n\n  async setViewportSize(params: channels.PageSetViewportSizeParams, metadata: CallMetadata): Promise<void> {\n    await this._page.setViewportSize(params.viewportSize);\n  }\n\n  async addInitScript(params: channels.PageAddInitScriptParams, metadata: CallMetadata): Promise<void> {\n    await this._page.addInitScript(params.source);\n  }\n\n  async setNetworkInterceptionPatterns(params: channels.PageSetNetworkInterceptionPatternsParams, metadata: CallMetadata): Promise<void> {\n    if (!params.patterns.length) {\n      await this._page.setClientRequestInterceptor(undefined);\n      return;\n    }\n    const urlMatchers = params.patterns.map(pattern => pattern.regexSource ? new RegExp(pattern.regexSource, pattern.regexFlags!) : pattern.glob!);\n    await this._page.setClientRequestInterceptor((route, request) => {\n      const matchesSome = urlMatchers.some(urlMatch => urlMatches(this._page._browserContext._options.baseURL, request.url(), urlMatch));\n      if (!matchesSome)\n        return false;\n      this._dispatchEvent('route', { route: RouteDispatcher.from(RequestDispatcher.from(this.parentScope(), request), route) });\n      return true;\n    });\n  }\n\n  async expectScreenshot(params: channels.PageExpectScreenshotParams, metadata: CallMetadata): Promise<channels.PageExpectScreenshotResult> {\n    const mask: { frame: Frame, selector: string }[] = (params.mask || []).map(({ frame, selector }) => ({\n      frame: (frame as FrameDispatcher)._object,\n      selector,\n    }));\n    const locator: { frame: Frame, selector: string } | undefined = params.locator ? {\n      frame: (params.locator.frame as FrameDispatcher)._object,\n      selector: params.locator.selector,\n    } : undefined;\n    return await this._page.expectScreenshot(metadata, {\n      ...params,\n      locator,\n      mask,\n    });\n  }\n\n  async screenshot(params: channels.PageScreenshotParams, metadata: CallMetadata): Promise<channels.PageScreenshotResult> {\n    const mask: { frame: Frame, selector: string }[] = (params.mask || []).map(({ frame, selector }) => ({\n      frame: (frame as FrameDispatcher)._object,\n      selector,\n    }));\n    return { binary: await this._page.screenshot(metadata, { ...params, mask }) };\n  }\n\n  async close(params: channels.PageCloseParams, metadata: CallMetadata): Promise<void> {\n    if (!params.runBeforeUnload)\n      metadata.potentiallyClosesScope = true;\n    await this._page.close(metadata, params);\n  }\n\n  async updateSubscription(params: channels.PageUpdateSubscriptionParams): Promise<void> {\n    if (params.event === 'fileChooser')\n      await this._page.setFileChooserIntercepted(params.enabled);\n    if (params.enabled)\n      this._subscriptions.add(params.event);\n    else\n      this._subscriptions.delete(params.event);\n  }\n\n  async keyboardDown(params: channels.PageKeyboardDownParams, metadata: CallMetadata): Promise<void> {\n    await this._page.keyboard.down(params.key);\n  }\n\n  async keyboardUp(params: channels.PageKeyboardUpParams, metadata: CallMetadata): Promise<void> {\n    await this._page.keyboard.up(params.key);\n  }\n\n  async keyboardInsertText(params: channels.PageKeyboardInsertTextParams, metadata: CallMetadata): Promise<void> {\n    await this._page.keyboard.insertText(params.text);\n  }\n\n  async keyboardType(params: channels.PageKeyboardTypeParams, metadata: CallMetadata): Promise<void> {\n    await this._page.keyboard.type(params.text, params);\n  }\n\n  async keyboardPress(params: channels.PageKeyboardPressParams, metadata: CallMetadata): Promise<void> {\n    await this._page.keyboard.press(params.key, params);\n  }\n\n  async mouseMove(params: channels.PageMouseMoveParams, metadata: CallMetadata): Promise<void> {\n    await this._page.mouse.move(params.x, params.y, params, metadata);\n  }\n\n  async mouseDown(params: channels.PageMouseDownParams, metadata: CallMetadata): Promise<void> {\n    await this._page.mouse.down(params, metadata);\n  }\n\n  async mouseUp(params: channels.PageMouseUpParams, metadata: CallMetadata): Promise<void> {\n    await this._page.mouse.up(params, metadata);\n  }\n\n  async mouseClick(params: channels.PageMouseClickParams, metadata: CallMetadata): Promise<void> {\n    await this._page.mouse.click(params.x, params.y, params, metadata);\n  }\n\n  async mouseWheel(params: channels.PageMouseWheelParams, metadata: CallMetadata): Promise<void> {\n    await this._page.mouse.wheel(params.deltaX, params.deltaY);\n  }\n\n  async touchscreenTap(params: channels.PageTouchscreenTapParams, metadata: CallMetadata): Promise<void> {\n    await this._page.touchscreen.tap(params.x, params.y, metadata);\n  }\n\n  async accessibilitySnapshot(params: channels.PageAccessibilitySnapshotParams, metadata: CallMetadata): Promise<channels.PageAccessibilitySnapshotResult> {\n    const rootAXNode = await this._page.accessibility.snapshot({\n      interestingOnly: params.interestingOnly,\n      root: params.root ? (params.root as ElementHandleDispatcher)._elementHandle : undefined\n    });\n    return { rootAXNode: rootAXNode || undefined };\n  }\n\n  async pdf(params: channels.PagePdfParams, metadata: CallMetadata): Promise<channels.PagePdfResult> {\n    if (!this._page.pdf)\n      throw new Error('PDF generation is only supported for Headless Chromium');\n    const buffer = await this._page.pdf(params);\n    return { pdf: buffer };\n  }\n\n  async bringToFront(params: channels.PageBringToFrontParams, metadata: CallMetadata): Promise<void> {\n    await this._page.bringToFront();\n  }\n\n  async startJSCoverage(params: channels.PageStartJSCoverageParams, metadata: CallMetadata): Promise<void> {\n    const coverage = this._page.coverage as CRCoverage;\n    await coverage.startJSCoverage(params);\n  }\n\n  async stopJSCoverage(params: channels.PageStopJSCoverageParams, metadata: CallMetadata): Promise<channels.PageStopJSCoverageResult> {\n    const coverage = this._page.coverage as CRCoverage;\n    return await coverage.stopJSCoverage();\n  }\n\n  async startCSSCoverage(params: channels.PageStartCSSCoverageParams, metadata: CallMetadata): Promise<void> {\n    const coverage = this._page.coverage as CRCoverage;\n    await coverage.startCSSCoverage(params);\n  }\n\n  async stopCSSCoverage(params: channels.PageStopCSSCoverageParams, metadata: CallMetadata): Promise<channels.PageStopCSSCoverageResult> {\n    const coverage = this._page.coverage as CRCoverage;\n    return await coverage.stopCSSCoverage();\n  }\n\n  _onFrameAttached(frame: Frame) {\n    this._dispatchEvent('frameAttached', { frame: FrameDispatcher.from(this.parentScope(), frame) });\n  }\n\n  _onFrameDetached(frame: Frame) {\n    this._dispatchEvent('frameDetached', { frame: FrameDispatcher.from(this.parentScope(), frame) });\n  }\n\n  override _onDispose() {\n    // Avoid protocol calls for the closed page.\n    if (!this._page.isClosedOrClosingOrCrashed())\n      this._page.setClientRequestInterceptor(undefined).catch(() => {});\n  }\n}\n\n\nexport class WorkerDispatcher extends Dispatcher<Worker, channels.WorkerChannel, PageDispatcher | BrowserContextDispatcher> implements channels.WorkerChannel {\n  _type_Worker = true;\n\n  static fromNullable(scope: PageDispatcher | BrowserContextDispatcher, worker: Worker | null): WorkerDispatcher | undefined {\n    if (!worker)\n      return undefined;\n    const result = existingDispatcher<WorkerDispatcher>(worker);\n    return result || new WorkerDispatcher(scope, worker);\n  }\n\n  constructor(scope: PageDispatcher | BrowserContextDispatcher, worker: Worker) {\n    super(scope, worker, 'Worker', {\n      url: worker.url()\n    });\n    this.addObjectListener(Worker.Events.Close, () => this._dispatchEvent('close'));\n  }\n\n  async evaluateExpression(params: channels.WorkerEvaluateExpressionParams, metadata: CallMetadata): Promise<channels.WorkerEvaluateExpressionResult> {\n    return { value: serializeResult(await this._object.evaluateExpression(params.expression, params.isFunction, parseArgument(params.arg))) };\n  }\n\n  async evaluateExpressionHandle(params: channels.WorkerEvaluateExpressionHandleParams, metadata: CallMetadata): Promise<channels.WorkerEvaluateExpressionHandleResult> {\n    return { handle: ElementHandleDispatcher.fromJSHandle(this, await this._object.evaluateExpressionHandle(params.expression, params.isFunction, parseArgument(params.arg))) };\n  }\n}\n\nexport class BindingCallDispatcher extends Dispatcher<{ guid: string }, channels.BindingCallChannel, PageDispatcher | BrowserContextDispatcher> implements channels.BindingCallChannel {\n  _type_BindingCall = true;\n  private _resolve: ((arg: any) => void) | undefined;\n  private _reject: ((error: any) => void) | undefined;\n  private _promise: Promise<any>;\n\n  constructor(scope: PageDispatcher, name: string, needsHandle: boolean, source: { context: BrowserContext, page: Page, frame: Frame }, args: any[]) {\n    super(scope, { guid: 'bindingCall@' + createGuid() }, 'BindingCall', {\n      frame: FrameDispatcher.from(scope.parentScope(), source.frame),\n      name,\n      args: needsHandle ? undefined : args.map(serializeResult),\n      handle: needsHandle ? ElementHandleDispatcher.fromJSHandle(scope, args[0] as JSHandle) : undefined,\n    });\n    this._promise = new Promise((resolve, reject) => {\n      this._resolve = resolve;\n      this._reject = reject;\n    });\n  }\n\n  promise() {\n    return this._promise;\n  }\n\n  async resolve(params: channels.BindingCallResolveParams, metadata: CallMetadata): Promise<void> {\n    this._resolve!(parseArgument(params.result));\n    this._dispose();\n  }\n\n  async reject(params: channels.BindingCallRejectParams, metadata: CallMetadata): Promise<void> {\n    this._reject!(parseError(params.error));\n    this._dispose();\n  }\n}\n"],"mappings":"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"}