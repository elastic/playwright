{"version":3,"file":"browserTypeDispatcher.js","names":["_browserDispatcher","require","_dispatcher","_browserContextDispatcher","BrowserTypeDispatcher","Dispatcher","constructor","scope","browserType","executablePath","name","_type_BrowserType","launch","params","metadata","browser","_object","BrowserDispatcher","launchPersistentContext","browserContext","userDataDir","context","BrowserContextDispatcher","connectOverCDP","endpointURL","timeout","browserDispatcher","defaultContext","_defaultContext","undefined","exports"],"sources":["../../../src/server/dispatchers/browserTypeDispatcher.ts"],"sourcesContent":["/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { BrowserType } from '../browserType';\nimport { BrowserDispatcher } from './browserDispatcher';\nimport type * as channels from '@protocol/channels';\nimport type { RootDispatcher } from './dispatcher';\nimport { Dispatcher } from './dispatcher';\nimport { BrowserContextDispatcher } from './browserContextDispatcher';\nimport type { CallMetadata } from '../instrumentation';\n\nexport class BrowserTypeDispatcher extends Dispatcher<BrowserType, channels.BrowserTypeChannel, RootDispatcher> implements channels.BrowserTypeChannel {\n  _type_BrowserType = true;\n  constructor(scope: RootDispatcher, browserType: BrowserType) {\n    super(scope, browserType, 'BrowserType', {\n      executablePath: browserType.executablePath(),\n      name: browserType.name()\n    });\n  }\n\n  async launch(params: channels.BrowserTypeLaunchParams, metadata: CallMetadata): Promise<channels.BrowserTypeLaunchResult> {\n    const browser = await this._object.launch(metadata, params);\n    return { browser: new BrowserDispatcher(this, browser) };\n  }\n\n  async launchPersistentContext(params: channels.BrowserTypeLaunchPersistentContextParams, metadata: CallMetadata): Promise<channels.BrowserTypeLaunchPersistentContextResult> {\n    const browserContext = await this._object.launchPersistentContext(metadata, params.userDataDir, params);\n    return { context: new BrowserContextDispatcher(this, browserContext) };\n  }\n\n  async connectOverCDP(params: channels.BrowserTypeConnectOverCDPParams, metadata: CallMetadata): Promise<channels.BrowserTypeConnectOverCDPResult> {\n    const browser = await this._object.connectOverCDP(metadata, params.endpointURL, params, params.timeout);\n    const browserDispatcher = new BrowserDispatcher(this, browser);\n    return {\n      browser: browserDispatcher,\n      defaultContext: browser._defaultContext ? new BrowserContextDispatcher(browserDispatcher, browser._defaultContext) : undefined,\n    };\n  }\n}\n"],"mappings":";;;;;;AAiBA,IAAAA,kBAAA,GAAAC,OAAA;AAGA,IAAAC,WAAA,GAAAD,OAAA;AACA,IAAAE,yBAAA,GAAAF,OAAA;AArBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAUO,MAAMG,qBAAqB,SAASC,sBAAU,CAAkG;EAErJC,WAAWA,CAACC,KAAqB,EAAEC,WAAwB,EAAE;IAC3D,KAAK,CAACD,KAAK,EAAEC,WAAW,EAAE,aAAa,EAAE;MACvCC,cAAc,EAAED,WAAW,CAACC,cAAc,CAAC,CAAC;MAC5CC,IAAI,EAAEF,WAAW,CAACE,IAAI,CAAC;IACzB,CAAC,CAAC;IAAC,KALLC,iBAAiB,GAAG,IAAI;EAMxB;EAEA,MAAMC,MAAMA,CAACC,MAAwC,EAAEC,QAAsB,EAA6C;IACxH,MAAMC,OAAO,GAAG,MAAM,IAAI,CAACC,OAAO,CAACJ,MAAM,CAACE,QAAQ,EAAED,MAAM,CAAC;IAC3D,OAAO;MAAEE,OAAO,EAAE,IAAIE,oCAAiB,CAAC,IAAI,EAAEF,OAAO;IAAE,CAAC;EAC1D;EAEA,MAAMG,uBAAuBA,CAACL,MAAyD,EAAEC,QAAsB,EAA8D;IAC3K,MAAMK,cAAc,GAAG,MAAM,IAAI,CAACH,OAAO,CAACE,uBAAuB,CAACJ,QAAQ,EAAED,MAAM,CAACO,WAAW,EAAEP,MAAM,CAAC;IACvG,OAAO;MAAEQ,OAAO,EAAE,IAAIC,kDAAwB,CAAC,IAAI,EAAEH,cAAc;IAAE,CAAC;EACxE;EAEA,MAAMI,cAAcA,CAACV,MAAgD,EAAEC,QAAsB,EAAqD;IAChJ,MAAMC,OAAO,GAAG,MAAM,IAAI,CAACC,OAAO,CAACO,cAAc,CAACT,QAAQ,EAAED,MAAM,CAACW,WAAW,EAAEX,MAAM,EAAEA,MAAM,CAACY,OAAO,CAAC;IACvG,MAAMC,iBAAiB,GAAG,IAAIT,oCAAiB,CAAC,IAAI,EAAEF,OAAO,CAAC;IAC9D,OAAO;MACLA,OAAO,EAAEW,iBAAiB;MAC1BC,cAAc,EAAEZ,OAAO,CAACa,eAAe,GAAG,IAAIN,kDAAwB,CAACI,iBAAiB,EAAEX,OAAO,CAACa,eAAe,CAAC,GAAGC;IACvH,CAAC;EACH;AACF;AAACC,OAAA,CAAA1B,qBAAA,GAAAA,qBAAA"}