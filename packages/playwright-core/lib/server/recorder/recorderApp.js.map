{"version":3,"file":"recorderApp.js","names":["_fs","_interopRequireDefault","require","_path","_progress","_events","_instrumentation","_utils","_utilsBundle","_launchApp","obj","__esModule","default","EmptyRecorderApp","EventEmitter","close","setPaused","paused","setMode","mode","setFileIfNeeded","file","setSelector","selector","userGesture","updateCallLogs","callLogs","setSources","sources","exports","RecorderApp","constructor","recorder","page","wsEndpoint","_page","_recorder","setMaxListeners","context","reason","_init","syncLocalStorageWithSettings","_setServerRequestInterceptor","route","request","url","startsWith","uri","substring","length","resolve","fs","promises","readFile","then","buffer","fulfill","requestUrl","status","headers","name","value","mime","getType","path","extname","body","toString","isBase64","catch","exposeBinding","_","data","emit","once","mainFrame","goto","serverSideCallMetadata","factory","process","env","PW_CODEGEN_NO_INSPECTOR","_open","inspectedContext","sdkLanguage","attribution","playwright","options","headed","_browser","headful","recorderPlaywright","createPlaywright","isInternalPlaywright","launchApp","chromium","windowSize","width","height","windowPosition","x","y","persistentContextOptions","noDefaultViewport","headless","PWTEST_CLI_HEADLESS","isUnderTest","useWebSocket","PWTEST_RECORDER_PORT","handleSIGINT","args","executablePath","isChromium","customExecutablePath","undefined","controller","ProgressController","run","progress","_defaultContext","_loadDefaultContextAsIs","result","evaluateExpression","window","playwrightSetMode","isFunction","playwrightSetFileIfNeeded","playwrightSetPaused","playwrightSetSources","PWTEST_CLI_IS_UNDER_TEST","_didSetSourcesForTest","text","_this$_recorder","bringToFront","_this$_recorder2","playwrightSetSelector","playwrightUpdateLogs"],"sources":["../../../src/server/recorder/recorderApp.ts"],"sourcesContent":["/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport fs from 'fs';\nimport path from 'path';\nimport type { Page } from '../page';\nimport { ProgressController } from '../progress';\nimport { EventEmitter } from 'events';\nimport { serverSideCallMetadata } from '../instrumentation';\nimport type { CallLog, EventData, Mode, Source } from '@recorder/recorderTypes';\nimport { isUnderTest } from '../../utils';\nimport { mime } from '../../utilsBundle';\nimport { syncLocalStorageWithSettings } from '../launchApp';\nimport type { Recorder, RecorderAppFactory } from '../recorder';\nimport type { BrowserContext } from '../browserContext';\nimport { launchApp } from '../launchApp';\n\ndeclare global {\n  interface Window {\n    playwrightSetFileIfNeeded: (file: string) => void;\n    playwrightSetMode: (mode: Mode) => void;\n    playwrightSetPaused: (paused: boolean) => void;\n    playwrightSetSources: (sources: Source[]) => void;\n    playwrightSetOverlayVisible: (visible: boolean) => void;\n    playwrightSetSelector: (selector: string, focus?: boolean) => void;\n    playwrightUpdateLogs: (callLogs: CallLog[]) => void;\n    dispatch(data: EventData): Promise<void>;\n    saveSettings?(): Promise<void>;\n  }\n}\n\nexport interface IRecorderApp extends EventEmitter {\n  close(): Promise<void>;\n  setPaused(paused: boolean): Promise<void>;\n  setMode(mode: Mode): Promise<void>;\n  setFileIfNeeded(file: string): Promise<void>;\n  setSelector(selector: string, userGesture?: boolean): Promise<void>;\n  updateCallLogs(callLogs: CallLog[]): Promise<void>;\n  setSources(sources: Source[]): Promise<void>;\n}\n\nexport class EmptyRecorderApp extends EventEmitter implements IRecorderApp {\n  async close(): Promise<void> {}\n  async setPaused(paused: boolean): Promise<void> {}\n  async setMode(mode: Mode): Promise<void> {}\n  async setFileIfNeeded(file: string): Promise<void> {}\n  async setSelector(selector: string, userGesture?: boolean): Promise<void> {}\n  async updateCallLogs(callLogs: CallLog[]): Promise<void> {}\n  async setSources(sources: Source[]): Promise<void> {}\n}\n\nexport class RecorderApp extends EventEmitter implements IRecorderApp {\n  private _page: Page;\n  readonly wsEndpoint: string | undefined;\n  private _recorder: Recorder;\n\n  constructor(recorder: Recorder, page: Page, wsEndpoint: string | undefined) {\n    super();\n    this.setMaxListeners(0);\n    this._recorder = recorder;\n    this._page = page;\n    this.wsEndpoint = wsEndpoint;\n  }\n\n  async close() {\n    await this._page.context().close({ reason: 'Recorder window closed' });\n  }\n\n  private async _init() {\n    await syncLocalStorageWithSettings(this._page, 'recorder');\n\n    await this._page._setServerRequestInterceptor(route => {\n      if (!route.request().url().startsWith('https://playwright/'))\n        return false;\n\n      const uri = route.request().url().substring('https://playwright/'.length);\n      const file = require.resolve('../../vite/recorder/' + uri);\n      fs.promises.readFile(file).then(buffer => {\n        route.fulfill({\n          requestUrl: route.request().url(),\n          status: 200,\n          headers: [\n            { name: 'Content-Type', value: mime.getType(path.extname(file)) || 'application/octet-stream' }\n          ],\n          body: buffer.toString('base64'),\n          isBase64: true\n        }).catch(() => {});\n      });\n      return true;\n    });\n\n    await this._page.exposeBinding('dispatch', false, (_, data: any) => this.emit('event', data));\n\n    this._page.once('close', () => {\n      this.emit('close');\n      this._page.context().close({ reason: 'Recorder window closed' }).catch(() => {});\n    });\n\n    const mainFrame = this._page.mainFrame();\n    await mainFrame.goto(serverSideCallMetadata(), 'https://playwright/index.html');\n  }\n\n  static factory(context: BrowserContext): RecorderAppFactory {\n    return async recorder => {\n      if (process.env.PW_CODEGEN_NO_INSPECTOR)\n        return new EmptyRecorderApp();\n      return await RecorderApp._open(recorder, context);\n    };\n  }\n\n  private static async _open(recorder: Recorder, inspectedContext: BrowserContext): Promise<IRecorderApp> {\n    const sdkLanguage = inspectedContext.attribution.playwright.options.sdkLanguage;\n    const headed = !!inspectedContext._browser.options.headful;\n    const recorderPlaywright = (require('../playwright').createPlaywright as typeof import('../playwright').createPlaywright)({ sdkLanguage: 'javascript', isInternalPlaywright: true });\n    const { context, page } = await launchApp(recorderPlaywright.chromium, {\n      sdkLanguage,\n      windowSize: { width: 600, height: 600 },\n      windowPosition: { x: 1020, y: 10 },\n      persistentContextOptions: {\n        noDefaultViewport: true,\n        headless: !!process.env.PWTEST_CLI_HEADLESS || (isUnderTest() && !headed),\n        useWebSocket: !!process.env.PWTEST_RECORDER_PORT,\n        handleSIGINT: false,\n        args: process.env.PWTEST_RECORDER_PORT ? [`--remote-debugging-port=${process.env.PWTEST_RECORDER_PORT}`] : [],\n        executablePath: inspectedContext._browser.options.isChromium ? inspectedContext._browser.options.customExecutablePath : undefined,\n      }\n    });\n    const controller = new ProgressController(serverSideCallMetadata(), context._browser);\n    await controller.run(async progress => {\n      await context._browser._defaultContext!._loadDefaultContextAsIs(progress);\n    });\n\n    const result = new RecorderApp(recorder, page, context._browser.options.wsEndpoint);\n    await result._init();\n    return result;\n  }\n\n  async setMode(mode: Mode): Promise<void> {\n    await this._page.mainFrame().evaluateExpression(((mode: Mode) => {\n      window.playwrightSetMode(mode);\n    }).toString(), { isFunction: true }, mode).catch(() => {});\n  }\n\n  async setFileIfNeeded(file: string): Promise<void> {\n    await this._page.mainFrame().evaluateExpression(((file: string) => {\n      window.playwrightSetFileIfNeeded(file);\n    }).toString(), { isFunction: true }, file).catch(() => {});\n  }\n\n  async setPaused(paused: boolean): Promise<void> {\n    await this._page.mainFrame().evaluateExpression(((paused: boolean) => {\n      window.playwrightSetPaused(paused);\n    }).toString(), { isFunction: true }, paused).catch(() => {});\n  }\n\n  async setSources(sources: Source[]): Promise<void> {\n    await this._page.mainFrame().evaluateExpression(((sources: Source[]) => {\n      window.playwrightSetSources(sources);\n    }).toString(), { isFunction: true }, sources).catch(() => {});\n\n    // Testing harness for runCLI mode.\n    if (process.env.PWTEST_CLI_IS_UNDER_TEST && sources.length)\n      (process as any)._didSetSourcesForTest(sources[0].text);\n  }\n\n  async setSelector(selector: string, userGesture?: boolean): Promise<void> {\n    if (userGesture) {\n      if (this._recorder?.mode() === 'inspecting') {\n        this._recorder.setMode('standby');\n        this._page.bringToFront();\n      } else {\n        this._recorder?.setMode('recording');\n      }\n    }\n    await this._page.mainFrame().evaluateExpression(((data: { selector: string, userGesture?: boolean }) => {\n      window.playwrightSetSelector(data.selector, data.userGesture);\n    }).toString(), { isFunction: true }, { selector, userGesture }).catch(() => {});\n  }\n\n  async updateCallLogs(callLogs: CallLog[]): Promise<void> {\n    await this._page.mainFrame().evaluateExpression(((callLogs: CallLog[]) => {\n      window.playwrightUpdateLogs(callLogs);\n    }).toString(), { isFunction: true }, callLogs).catch(() => {});\n  }\n}\n"],"mappings":"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"}