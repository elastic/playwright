{"version":3,"file":"throttledFile.js","names":["fs","_interopRequireWildcard","require","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","ThrottledFile","constructor","file","_file","_timer","_text","setContent","text","setTimeout","flush","clearTimeout","undefined","writeFileSync","exports"],"sources":["../../../src/server/recorder/throttledFile.ts"],"sourcesContent":["/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as fs from 'fs';\n\nexport class ThrottledFile {\n  private _file: string;\n  private _timer: NodeJS.Timeout | undefined;\n  private _text: string | undefined;\n\n  constructor(file: string) {\n    this._file = file;\n  }\n\n  setContent(text: string) {\n    this._text = text;\n    if (!this._timer)\n      this._timer = setTimeout(() => this.flush(), 250);\n  }\n\n  flush(): void {\n    if (this._timer) {\n      clearTimeout(this._timer);\n      this._timer = undefined;\n    }\n    if (this._text)\n      fs.writeFileSync(this._file, this._text);\n    this._text = undefined;\n  }\n}\n"],"mappings":";;;;;;AAgBA,IAAAA,EAAA,GAAAC,uBAAA,CAAAC,OAAA;AAAyB,SAAAC,yBAAAC,CAAA,6BAAAC,OAAA,mBAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAAF,wBAAA,YAAAA,CAAAC,CAAA,WAAAA,CAAA,GAAAG,CAAA,GAAAD,CAAA,KAAAF,CAAA;AAAA,SAAAH,wBAAAG,CAAA,EAAAE,CAAA,SAAAA,CAAA,IAAAF,CAAA,IAAAA,CAAA,CAAAI,UAAA,SAAAJ,CAAA,eAAAA,CAAA,uBAAAA,CAAA,yBAAAA,CAAA,WAAAK,OAAA,EAAAL,CAAA,QAAAG,CAAA,GAAAJ,wBAAA,CAAAG,CAAA,OAAAC,CAAA,IAAAA,CAAA,CAAAG,GAAA,CAAAN,CAAA,UAAAG,CAAA,CAAAI,GAAA,CAAAP,CAAA,OAAAQ,CAAA,KAAAC,SAAA,UAAAC,CAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA,WAAAC,CAAA,IAAAd,CAAA,oBAAAc,CAAA,IAAAH,MAAA,CAAAI,SAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAjB,CAAA,EAAAc,CAAA,SAAAI,CAAA,GAAAR,CAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAb,CAAA,EAAAc,CAAA,UAAAI,CAAA,KAAAA,CAAA,CAAAX,GAAA,IAAAW,CAAA,CAAAC,GAAA,IAAAR,MAAA,CAAAC,cAAA,CAAAJ,CAAA,EAAAM,CAAA,EAAAI,CAAA,IAAAV,CAAA,CAAAM,CAAA,IAAAd,CAAA,CAAAc,CAAA,YAAAN,CAAA,CAAAH,OAAA,GAAAL,CAAA,EAAAG,CAAA,IAAAA,CAAA,CAAAgB,GAAA,CAAAnB,CAAA,EAAAQ,CAAA,GAAAA,CAAA;AAhBzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAIO,MAAMY,aAAa,CAAC;EAKzBC,WAAWA,CAACC,IAAY,EAAE;IAAA,KAJlBC,KAAK;IAAA,KACLC,MAAM;IAAA,KACNC,KAAK;IAGX,IAAI,CAACF,KAAK,GAAGD,IAAI;EACnB;EAEAI,UAAUA,CAACC,IAAY,EAAE;IACvB,IAAI,CAACF,KAAK,GAAGE,IAAI;IACjB,IAAI,CAAC,IAAI,CAACH,MAAM,EACd,IAAI,CAACA,MAAM,GAAGI,UAAU,CAAC,MAAM,IAAI,CAACC,KAAK,CAAC,CAAC,EAAE,GAAG,CAAC;EACrD;EAEAA,KAAKA,CAAA,EAAS;IACZ,IAAI,IAAI,CAACL,MAAM,EAAE;MACfM,YAAY,CAAC,IAAI,CAACN,MAAM,CAAC;MACzB,IAAI,CAACA,MAAM,GAAGO,SAAS;IACzB;IACA,IAAI,IAAI,CAACN,KAAK,EACZ7B,EAAE,CAACoC,aAAa,CAAC,IAAI,CAACT,KAAK,EAAE,IAAI,CAACE,KAAK,CAAC;IAC1C,IAAI,CAACA,KAAK,GAAGM,SAAS;EACxB;AACF;AAACE,OAAA,CAAAb,aAAA,GAAAA,aAAA"}