{"version":3,"file":"utilityScriptSerializers.js","names":["source","isRegExp","obj","RegExp","Object","prototype","toString","call","error","isDate","Date","isURL","URL","isError","_Object$getPrototypeO","Error","getPrototypeOf","name","parseEvaluationResultValue","value","handles","refs","Map","is","undefined","get","ref","v","NaN","Infinity","d","u","BigInt","bi","e","m","n","stack","s","r","p","f","result","set","id","a","push","k","o","h","serializeAsCallArgument","handleSerializer","serialize","visited","lastId","visitorInfo","globalThis","Window","Document","Node","innerSerialize","fallThrough","_value$stack","startsWith","message","toJSON","flags","Array","isArray","i","length","keys","item","jsonWrapper","exports"],"sources":["../../../src/server/isomorphic/utilityScriptSerializers.ts"],"sourcesContent":["/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport type SerializedValue =\n    undefined | boolean | number | string |\n    { v: 'null' | 'undefined' | 'NaN' | 'Infinity' | '-Infinity' | '-0' } |\n    { d: string } |\n    { u: string } |\n    { bi: string } |\n    { e: { n: string, m: string, s: string } } |\n    { r: { p: string, f: string } } |\n    { a: SerializedValue[], id: number } |\n    { o: { k: string, v: SerializedValue }[], id: number } |\n    { ref: number } |\n    { h: number };\n\nexport type HandleOrValue = { h: number } | { fallThrough: any };\n\ntype VisitorInfo = {\n  visited: Map<object, number>;\n  lastId: number;\n};\n\nexport function source() {\n\n  function isRegExp(obj: any): obj is RegExp {\n    try {\n      return obj instanceof RegExp || Object.prototype.toString.call(obj) === '[object RegExp]';\n    } catch (error) {\n      return false;\n    }\n  }\n\n  function isDate(obj: any): obj is Date {\n    try {\n      return obj instanceof Date || Object.prototype.toString.call(obj) === '[object Date]';\n    } catch (error) {\n      return false;\n    }\n  }\n\n  function isURL(obj: any): obj is URL {\n    try {\n      return obj instanceof URL || Object.prototype.toString.call(obj) === '[object URL]';\n    } catch (error) {\n      return false;\n    }\n  }\n\n  function isError(obj: any): obj is Error {\n    try {\n      return obj instanceof Error || (obj && Object.getPrototypeOf(obj)?.name === 'Error');\n    } catch (error) {\n      return false;\n    }\n  }\n\n  function parseEvaluationResultValue(value: SerializedValue, handles: any[] = [], refs: Map<number, object> = new Map()): any {\n    if (Object.is(value, undefined))\n      return undefined;\n    if (typeof value === 'object' && value) {\n      if ('ref' in value)\n        return refs.get(value.ref);\n      if ('v' in value) {\n        if (value.v === 'undefined')\n          return undefined;\n        if (value.v === 'null')\n          return null;\n        if (value.v === 'NaN')\n          return NaN;\n        if (value.v === 'Infinity')\n          return Infinity;\n        if (value.v === '-Infinity')\n          return -Infinity;\n        if (value.v === '-0')\n          return -0;\n        return undefined;\n      }\n      if ('d' in value)\n        return new Date(value.d);\n      if ('u' in value)\n        return new URL(value.u);\n      if ('bi' in value)\n        return BigInt(value.bi);\n      if ('e' in value) {\n        const error = new Error(value.e.m);\n        error.name = value.e.n;\n        error.stack = value.e.s;\n        return error;\n      }\n      if ('r' in value)\n        return new RegExp(value.r.p, value.r.f);\n      if ('a' in value) {\n        const result: any[] = [];\n        refs.set(value.id, result);\n        for (const a of value.a)\n          result.push(parseEvaluationResultValue(a, handles, refs));\n        return result;\n      }\n      if ('o' in value) {\n        const result: any = {};\n        refs.set(value.id, result);\n        for (const { k, v } of value.o)\n          result[k] = parseEvaluationResultValue(v, handles, refs);\n        return result;\n      }\n      if ('h' in value)\n        return handles[value.h];\n    }\n    return value;\n  }\n\n  function serializeAsCallArgument(value: any, handleSerializer: (value: any) => HandleOrValue): SerializedValue {\n    return serialize(value, handleSerializer, { visited: new Map(), lastId: 0 });\n  }\n\n  function serialize(value: any, handleSerializer: (value: any) => HandleOrValue, visitorInfo: VisitorInfo): SerializedValue {\n    if (value && typeof value === 'object') {\n      if (typeof globalThis.Window === 'function' && value instanceof globalThis.Window)\n        return 'ref: <Window>';\n      if (typeof globalThis.Document === 'function' && value instanceof globalThis.Document)\n        return 'ref: <Document>';\n      if (typeof globalThis.Node === 'function' && value instanceof globalThis.Node)\n        return 'ref: <Node>';\n    }\n    return innerSerialize(value, handleSerializer, visitorInfo);\n  }\n\n  function innerSerialize(value: any, handleSerializer: (value: any) => HandleOrValue, visitorInfo: VisitorInfo): SerializedValue {\n    const result = handleSerializer(value);\n    if ('fallThrough' in result)\n      value = result.fallThrough;\n    else\n      return result;\n\n    if (typeof value === 'symbol')\n      return { v: 'undefined' };\n    if (Object.is(value, undefined))\n      return { v: 'undefined' };\n    if (Object.is(value, null))\n      return { v: 'null' };\n    if (Object.is(value, NaN))\n      return { v: 'NaN' };\n    if (Object.is(value, Infinity))\n      return { v: 'Infinity' };\n    if (Object.is(value, -Infinity))\n      return { v: '-Infinity' };\n    if (Object.is(value, -0))\n      return { v: '-0' };\n\n    if (typeof value === 'boolean')\n      return value;\n    if (typeof value === 'number')\n      return value;\n    if (typeof value === 'string')\n      return value;\n    if (typeof value === 'bigint')\n      return { bi: value.toString() };\n\n    if (isError(value)) {\n      let stack;\n      if (value.stack?.startsWith(value.name + ': ' + value.message)) {\n        // v8\n        stack = value.stack;\n      } else {\n        stack = `${value.name}: ${value.message}\\n${value.stack}`;\n      }\n      return { e: { n: value.name, m: value.message, s: stack } };\n    }\n    if (isDate(value))\n      return { d: value.toJSON() };\n    if (isURL(value))\n      return { u: value.toJSON() };\n    if (isRegExp(value))\n      return { r: { p: value.source, f: value.flags } };\n\n    const id = visitorInfo.visited.get(value);\n    if (id)\n      return { ref: id };\n\n    if (Array.isArray(value)) {\n      const a = [];\n      const id = ++visitorInfo.lastId;\n      visitorInfo.visited.set(value, id);\n      for (let i = 0; i < value.length; ++i)\n        a.push(serialize(value[i], handleSerializer, visitorInfo));\n      return { a, id };\n    }\n\n    if (typeof value === 'object') {\n      const o: { k: string, v: SerializedValue }[] = [];\n      const id = ++visitorInfo.lastId;\n      visitorInfo.visited.set(value, id);\n      for (const name of Object.keys(value)) {\n        let item;\n        try {\n          item = value[name];\n        } catch (e) {\n          continue;  // native bindings will throw sometimes\n        }\n        if (name === 'toJSON' && typeof item === 'function')\n          o.push({ k: name, v: { o: [], id: 0 } });\n        else\n          o.push({ k: name, v: serialize(item, handleSerializer, visitorInfo) });\n      }\n\n      let jsonWrapper;\n      try {\n        // If Object.keys().length === 0 we fall back to toJSON if it exists\n        if (o.length === 0 && value.toJSON && typeof value.toJSON === 'function')\n          jsonWrapper = { value: value.toJSON() };\n      } catch (e) {\n      }\n      if (jsonWrapper)\n        return innerSerialize(jsonWrapper.value, handleSerializer, visitorInfo);\n\n      return { o, id };\n    }\n  }\n\n  return { parseEvaluationResultValue, serializeAsCallArgument };\n}\n\nconst result = source();\nexport const parseEvaluationResultValue = result.parseEvaluationResultValue;\nexport const serializeAsCallArgument = result.serializeAsCallArgument;\n"],"mappings":"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"}