{"version":3,"file":"java.js","names":["_language","require","_deviceDescriptors","_javascript","_utils","JavaLanguageGenerator","constructor","mode","id","groupName","name","highlighter","_mode","Error","generateAction","actionInContext","action","pageAlias","frame","offset","formatter","JavaScriptFormatter","add","url","quote","format","locators","framePath","map","selector","_asLocator","subject","join","signals","toSignalMap","dialog","code","_generateActionCall","length","popup","popupAlias","download","downloadAlias","inFrameLocator","method","clickCount","options","toClickOptions","optionsText","formatClickOptions","text","formatPath","files","modifiers","toKeyboardModifiers","shortcut","key","formatSelectOption","substring","checked","assertion","value","asLocator","generateHeader","browserName","formatLaunchOptions","launchOptions","formatContextOptions","contextOptions","deviceName","generateFooter","saveStorage","storageStateLine","exports","Array","isArray","s","lines","Object","keys","filter","undefined","push","channel","headless","_options$recordHar","_options$recordHar2","_options$recordHar3","_options$recordHar4","_options$recordHar5","_options$recordHar6","_options$recordHar7","device","deviceDescriptors","acceptDownloads","bypassCSP","colorScheme","toUpperCase","deviceScaleFactor","geolocation","latitude","longitude","hasTouch","isMobile","locale","proxy","server","recordHar","content","omitContent","path","urlFilter","serviceWorkers","storageState","timezoneId","userAgent","viewport","width","height","button","m","position","x","y","unshift","escapeWithQuotes"],"sources":["../../../src/server/codegen/java.ts"],"sourcesContent":["/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { BrowserContextOptions } from '../../../types/types';\nimport type * as types from '../types';\nimport type { ActionInContext, Language, LanguageGenerator, LanguageGeneratorOptions } from './types';\nimport { toClickOptions, toKeyboardModifiers, toSignalMap } from './language';\nimport { deviceDescriptors } from '../deviceDescriptors';\nimport { JavaScriptFormatter } from './javascript';\nimport { escapeWithQuotes, asLocator } from '../../utils';\n\ntype JavaLanguageMode = 'library' | 'junit';\n\nexport class JavaLanguageGenerator implements LanguageGenerator {\n  id: string;\n  groupName = 'Java';\n  name: string;\n  highlighter = 'java' as Language;\n  _mode: JavaLanguageMode;\n\n  constructor(mode: JavaLanguageMode) {\n    if (mode === 'library') {\n      this.name = 'Library';\n      this.id = 'java';\n    } else if (mode === 'junit') {\n      this.name = 'JUnit';\n      this.id = 'java-junit';\n    } else {\n      throw new Error(`Unknown Java language mode: ${mode}`);\n    }\n    this._mode = mode;\n  }\n\n  generateAction(actionInContext: ActionInContext): string {\n    const action = actionInContext.action;\n    const pageAlias = actionInContext.frame.pageAlias;\n    const offset = this._mode === 'junit' ? 4 : 6;\n    const formatter = new JavaScriptFormatter(offset);\n\n    if (this._mode !== 'library' && (action.name === 'openPage' || action.name === 'closePage'))\n      return '';\n\n    if (action.name === 'openPage') {\n      formatter.add(`Page ${pageAlias} = context.newPage();`);\n      if (action.url && action.url !== 'about:blank' && action.url !== 'chrome://newtab/')\n        formatter.add(`${pageAlias}.navigate(${quote(action.url)});`);\n      return formatter.format();\n    }\n\n    const locators = actionInContext.frame.framePath.map(selector => `.${this._asLocator(selector, false)}.contentFrame()`);\n    const subject = `${pageAlias}${locators.join('')}`;\n    const signals = toSignalMap(action);\n\n    if (signals.dialog) {\n      formatter.add(`  ${pageAlias}.onceDialog(dialog -> {\n        System.out.println(String.format(\"Dialog message: %s\", dialog.message()));\n        dialog.dismiss();\n      });`);\n    }\n\n    let code = this._generateActionCall(subject, actionInContext, !!actionInContext.frame.framePath.length);\n\n    if (signals.popup) {\n      code = `Page ${signals.popup.popupAlias} = ${pageAlias}.waitForPopup(() -> {\n        ${code}\n      });`;\n    }\n\n    if (signals.download) {\n      code = `Download download${signals.download.downloadAlias} = ${pageAlias}.waitForDownload(() -> {\n        ${code}\n      });`;\n    }\n\n    formatter.add(code);\n\n    return formatter.format();\n  }\n\n  private _generateActionCall(subject: string, actionInContext: ActionInContext, inFrameLocator: boolean): string {\n    const action = actionInContext.action;\n    switch (action.name) {\n      case 'openPage':\n        throw Error('Not reached');\n      case 'closePage':\n        return `${subject}.close();`;\n      case 'click': {\n        let method = 'click';\n        if (action.clickCount === 2)\n          method = 'dblclick';\n        const options = toClickOptions(action);\n        const optionsText = formatClickOptions(options);\n        return `${subject}.${this._asLocator(action.selector, inFrameLocator)}.${method}(${optionsText});`;\n      }\n      case 'check':\n        return `${subject}.${this._asLocator(action.selector, inFrameLocator)}.check();`;\n      case 'uncheck':\n        return `${subject}.${this._asLocator(action.selector, inFrameLocator)}.uncheck();`;\n      case 'fill':\n        return `${subject}.${this._asLocator(action.selector, inFrameLocator)}.fill(${quote(action.text)});`;\n      case 'setInputFiles':\n        return `${subject}.${this._asLocator(action.selector, inFrameLocator)}.setInputFiles(${formatPath(action.files.length === 1 ? action.files[0] : action.files)});`;\n      case 'press': {\n        const modifiers = toKeyboardModifiers(action.modifiers);\n        const shortcut = [...modifiers, action.key].join('+');\n        return `${subject}.${this._asLocator(action.selector, inFrameLocator)}.press(${quote(shortcut)});`;\n      }\n      case 'navigate':\n        return `${subject}.navigate(${quote(action.url)});`;\n      case 'select':\n        return `${subject}.${this._asLocator(action.selector, inFrameLocator)}.selectOption(${formatSelectOption(action.options.length > 1 ? action.options : action.options[0])});`;\n      case 'assertText':\n        return `assertThat(${subject}.${this._asLocator(action.selector, inFrameLocator)}).${action.substring ? 'containsText' : 'hasText'}(${quote(action.text)});`;\n      case 'assertChecked':\n        return `assertThat(${subject}.${this._asLocator(action.selector, inFrameLocator)})${action.checked ? '' : '.not()'}.isChecked();`;\n      case 'assertVisible':\n        return `assertThat(${subject}.${this._asLocator(action.selector, inFrameLocator)}).isVisible();`;\n      case 'assertValue': {\n        const assertion = action.value ? `hasValue(${quote(action.value)})` : `isEmpty()`;\n        return `assertThat(${subject}.${this._asLocator(action.selector, inFrameLocator)}).${assertion};`;\n      }\n    }\n  }\n\n  private _asLocator(selector: string, inFrameLocator: boolean) {\n    return asLocator('java', selector, inFrameLocator);\n  }\n\n  generateHeader(options: LanguageGeneratorOptions): string {\n    const formatter = new JavaScriptFormatter();\n    if (this._mode === 'junit') {\n      formatter.add(`\n      import com.microsoft.playwright.junit.UsePlaywright;\n      import com.microsoft.playwright.Page;\n      import com.microsoft.playwright.options.*;\n\n      import org.junit.jupiter.api.*;\n      import static com.microsoft.playwright.assertions.PlaywrightAssertions.*;\n\n      @UsePlaywright\n      public class TestExample {\n        @Test\n        void test(Page page) {`);\n      return formatter.format();\n    }\n    formatter.add(`\n    import com.microsoft.playwright.*;\n    import com.microsoft.playwright.options.*;\n    import static com.microsoft.playwright.assertions.PlaywrightAssertions.assertThat;\n    import java.util.*;\n\n    public class Example {\n      public static void main(String[] args) {\n        try (Playwright playwright = Playwright.create()) {\n          Browser browser = playwright.${options.browserName}().launch(${formatLaunchOptions(options.launchOptions)});\n          BrowserContext context = browser.newContext(${formatContextOptions(options.contextOptions, options.deviceName)});`);\n    return formatter.format();\n  }\n\n  generateFooter(saveStorage: string | undefined): string {\n    const storageStateLine = saveStorage ? `\\n      context.storageState(new BrowserContext.StorageStateOptions().setPath(${quote(saveStorage)}));\\n` : '';\n    if (this._mode === 'junit') {\n      return `${storageStateLine}  }\n}`;\n    }\n    return `${storageStateLine}    }\n  }\n}`;\n  }\n}\n\nfunction formatPath(files: string | string[]): string {\n  if (Array.isArray(files)) {\n    if (files.length === 0)\n      return 'new Path[0]';\n    return `new Path[] {${files.map(s => 'Paths.get(' + quote(s) + ')').join(', ')}}`;\n  }\n  return `Paths.get(${quote(files)})`;\n}\n\nfunction formatSelectOption(options: string | string[]): string {\n  if (Array.isArray(options)) {\n    if (options.length === 0)\n      return 'new String[0]';\n    return `new String[] {${options.map(s => quote(s)).join(', ')}}`;\n  }\n  return quote(options);\n}\n\nfunction formatLaunchOptions(options: any): string {\n  const lines = [];\n  if (!Object.keys(options).filter(key => options[key] !== undefined).length)\n    return '';\n  lines.push('new BrowserType.LaunchOptions()');\n  if (options.channel)\n    lines.push(`  .setChannel(${quote(options.channel)})`);\n  if (typeof options.headless === 'boolean')\n    lines.push(`  .setHeadless(false)`);\n  return lines.join('\\n');\n}\n\nfunction formatContextOptions(contextOptions: BrowserContextOptions, deviceName: string | undefined): string {\n  const lines = [];\n  if (!Object.keys(contextOptions).length && !deviceName)\n    return '';\n  const device = deviceName ? deviceDescriptors[deviceName] : {};\n  const options: BrowserContextOptions = { ...device, ...contextOptions };\n  lines.push('new Browser.NewContextOptions()');\n  if (options.acceptDownloads)\n    lines.push(`  .setAcceptDownloads(true)`);\n  if (options.bypassCSP)\n    lines.push(`  .setBypassCSP(true)`);\n  if (options.colorScheme)\n    lines.push(`  .setColorScheme(ColorScheme.${options.colorScheme.toUpperCase()})`);\n  if (options.deviceScaleFactor)\n    lines.push(`  .setDeviceScaleFactor(${options.deviceScaleFactor})`);\n  if (options.geolocation)\n    lines.push(`  .setGeolocation(${options.geolocation.latitude}, ${options.geolocation.longitude})`);\n  if (options.hasTouch)\n    lines.push(`  .setHasTouch(${options.hasTouch})`);\n  if (options.isMobile)\n    lines.push(`  .setIsMobile(${options.isMobile})`);\n  if (options.locale)\n    lines.push(`  .setLocale(${quote(options.locale)})`);\n  if (options.proxy)\n    lines.push(`  .setProxy(new Proxy(${quote(options.proxy.server)}))`);\n  if (options.recordHar?.content)\n    lines.push(`  .setRecordHarContent(HarContentPolicy.${options.recordHar?.content.toUpperCase()})`);\n  if (options.recordHar?.mode)\n    lines.push(`  .setRecordHarMode(HarMode.${options.recordHar?.mode.toUpperCase()})`);\n  if (options.recordHar?.omitContent)\n    lines.push(`  .setRecordHarOmitContent(true)`);\n  if (options.recordHar?.path)\n    lines.push(`  .setRecordHarPath(Paths.get(${quote(options.recordHar.path)}))`);\n  if (options.recordHar?.urlFilter)\n    lines.push(`  .setRecordHarUrlFilter(${quote(options.recordHar.urlFilter as string)})`);\n  if (options.serviceWorkers)\n    lines.push(`  .setServiceWorkers(ServiceWorkerPolicy.${options.serviceWorkers.toUpperCase()})`);\n  if (options.storageState)\n    lines.push(`  .setStorageStatePath(Paths.get(${quote(options.storageState as string)}))`);\n  if (options.timezoneId)\n    lines.push(`  .setTimezoneId(${quote(options.timezoneId)})`);\n  if (options.userAgent)\n    lines.push(`  .setUserAgent(${quote(options.userAgent)})`);\n  if (options.viewport)\n    lines.push(`  .setViewportSize(${options.viewport.width}, ${options.viewport.height})`);\n  return lines.join('\\n');\n}\n\nfunction formatClickOptions(options: types.MouseClickOptions) {\n  const lines = [];\n  if (options.button)\n    lines.push(`  .setButton(MouseButton.${options.button.toUpperCase()})`);\n  if (options.modifiers)\n    lines.push(`  .setModifiers(Arrays.asList(${options.modifiers.map(m => `KeyboardModifier.${m.toUpperCase()}`).join(', ')}))`);\n  if (options.clickCount)\n    lines.push(`  .setClickCount(${options.clickCount})`);\n  if (options.position)\n    lines.push(`  .setPosition(${options.position.x}, ${options.position.y})`);\n  if (!lines.length)\n    return '';\n  lines.unshift(`new Locator.ClickOptions()`);\n  return lines.join('\\n');\n}\n\nfunction quote(text: string) {\n  return escapeWithQuotes(text, '\\\"');\n}\n"],"mappings":"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"}