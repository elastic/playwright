{"version":3,"file":"protocolError.js","names":["_stackTrace","require","ProtocolError","Error","constructor","type","method","logs","setMessage","message","rewriteErrorMessage","browserLogMessage","exports","isProtocolError","e","isSessionClosedError"],"sources":["../../src/server/protocolError.ts"],"sourcesContent":["/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { rewriteErrorMessage } from '../utils/stackTrace';\n\nexport class ProtocolError extends Error {\n  type: 'error' | 'closed' | 'crashed';\n  method: string | undefined;\n  logs: string | undefined;\n\n  constructor(type: 'error' | 'closed' | 'crashed', method?: string, logs?: string) {\n    super();\n    this.type = type;\n    this.method = method;\n    this.logs = logs;\n  }\n\n  setMessage(message: string) {\n    rewriteErrorMessage(this, `Protocol error (${this.method}): ${message}`);\n  }\n\n  browserLogMessage() {\n    return this.logs ? '\\nBrowser logs:\\n' + this.logs : '';\n  }\n}\n\nexport function isProtocolError(e: Error): e is ProtocolError {\n  return e instanceof ProtocolError;\n}\n\nexport function isSessionClosedError(e: Error): e is ProtocolError {\n  return e instanceof ProtocolError && (e.type === 'closed' || e.type === 'crashed');\n}\n"],"mappings":";;;;;;;;AAgBA,IAAAA,WAAA,GAAAC,OAAA;AAhBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAIO,MAAMC,aAAa,SAASC,KAAK,CAAC;EAKvCC,WAAWA,CAACC,IAAoC,EAAEC,MAAe,EAAEC,IAAa,EAAE;IAChF,KAAK,CAAC,CAAC;IAAC,KALVF,IAAI;IAAA,KACJC,MAAM;IAAA,KACNC,IAAI;IAIF,IAAI,CAACF,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACC,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACC,IAAI,GAAGA,IAAI;EAClB;EAEAC,UAAUA,CAACC,OAAe,EAAE;IAC1B,IAAAC,+BAAmB,EAAC,IAAI,EAAG,mBAAkB,IAAI,CAACJ,MAAO,MAAKG,OAAQ,EAAC,CAAC;EAC1E;EAEAE,iBAAiBA,CAAA,EAAG;IAClB,OAAO,IAAI,CAACJ,IAAI,GAAG,mBAAmB,GAAG,IAAI,CAACA,IAAI,GAAG,EAAE;EACzD;AACF;AAACK,OAAA,CAAAV,aAAA,GAAAA,aAAA;AAEM,SAASW,eAAeA,CAACC,CAAQ,EAAsB;EAC5D,OAAOA,CAAC,YAAYZ,aAAa;AACnC;AAEO,SAASa,oBAAoBA,CAACD,CAAQ,EAAsB;EACjE,OAAOA,CAAC,YAAYZ,aAAa,KAAKY,CAAC,CAACT,IAAI,KAAK,QAAQ,IAAIS,CAAC,CAACT,IAAI,KAAK,SAAS,CAAC;AACpF"}