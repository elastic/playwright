{"version":3,"file":"android.js","names":["_fs","_interopRequireDefault","require","_utils","_events","_browserContext","_channelOwner","_timeoutSettings","_waiter","_events2","_connection","_errors","_timeoutRunner","_Symbol$asyncDispose","obj","__esModule","default","Android","ChannelOwner","from","android","_object","constructor","parent","type","guid","initializer","_serverLauncher","TimeoutSettings","setDefaultTimeout","timeout","_channel","setDefaultTimeoutNoReply","devices","options","map","d","AndroidDevice","launchServer","Error","connect","wsEndpoint","_wrapApiCall","deadline","monotonicTime","headers","localUtils","connectParams","slowMo","pipe","closePipe","close","catch","connection","Connection","_instrumentation","markAsRemote","on","device","closeError","onPipeClosed","_device","_didClose","onmessage","message","send","dispatch","e","String","result","raceAgainstDeadline","playwright","initializePlaywright","_initializer","preConnectedAndroidDevice","_shouldCloseConnectionOnClose","Events","Close","timedOut","exports","Symbol","asyncDispose","androidDevice","_webViews","Map","input","AndroidInput","webView","_onWebViewAdded","socketName","_onWebViewRemoved","view","AndroidWebView","set","emit","WebView","get","delete","serial","model","webViews","values","selector","predicate","v","pkg","_socketName","find","waitForEvent","wait","toSelectorChannel","fill","text","press","key","tap","drag","dest","fling","direction","longTap","pinchClose","percent","pinchOpen","scroll","swipe","info","screenshot","binary","path","fs","promises","writeFile","isTargetClosedError","shell","command","open","AndroidSocket","socket","installApk","file","loadFile","args","push","mode","undefined","launchBrowser","contextOptions","prepareBrowserContextParams","context","BrowserContext","_setOptions","event","optionsOrPredicate","waiter","Waiter","createForEvent","rejectOnTimeout","rejectOnEvent","TargetClosedError","dispose","data","Data","write","isString","readFile","inputType","inputPress","point","inputTap","segments","steps","inputSwipe","to","inputDrag","checkable","checked","clazz","clickable","depth","desc","enabled","focusable","focused","hasChild","hasDescendant","longClickable","res","scrollable","selected","toRegex","value","isRegExp","source","replace","maxDepth","EventEmitter","_data","_pagePromise","pid","page","_fetchPage","connectToWebView","pages"],"sources":["../../src/client/android.ts"],"sourcesContent":["/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport fs from 'fs';\nimport { isString, isRegExp, monotonicTime } from '../utils';\nimport type * as channels from '@protocol/channels';\nimport { Events } from './events';\nimport { BrowserContext, prepareBrowserContextParams } from './browserContext';\nimport { ChannelOwner } from './channelOwner';\nimport type * as api from '../../types/types';\nimport type * as types from './types';\nimport type { Page } from './page';\nimport { TimeoutSettings } from '../common/timeoutSettings';\nimport { Waiter } from './waiter';\nimport { EventEmitter } from 'events';\nimport { Connection } from './connection';\nimport { isTargetClosedError, TargetClosedError } from './errors';\nimport { raceAgainstDeadline } from '../utils/timeoutRunner';\nimport type { AndroidServerLauncherImpl } from '../androidServerImpl';\n\ntype Direction = 'down' | 'up' | 'left' | 'right';\ntype SpeedOptions = { speed?: number };\n\nexport class Android extends ChannelOwner<channels.AndroidChannel> implements api.Android {\n  readonly _timeoutSettings: TimeoutSettings;\n  _serverLauncher?: AndroidServerLauncherImpl;\n\n  static from(android: channels.AndroidChannel): Android {\n    return (android as any)._object;\n  }\n\n  constructor(parent: ChannelOwner, type: string, guid: string, initializer: channels.AndroidInitializer) {\n    super(parent, type, guid, initializer);\n    this._timeoutSettings = new TimeoutSettings();\n  }\n\n  setDefaultTimeout(timeout: number) {\n    this._timeoutSettings.setDefaultTimeout(timeout);\n    this._channel.setDefaultTimeoutNoReply({ timeout });\n  }\n\n  async devices(options: { port?: number } = {}): Promise<AndroidDevice[]> {\n    const { devices } = await this._channel.devices(options);\n    return devices.map(d => AndroidDevice.from(d));\n  }\n\n  async launchServer(options: types.LaunchServerOptions = {}): Promise<api.BrowserServer> {\n    if (!this._serverLauncher)\n      throw new Error('Launching server is not supported');\n    return await this._serverLauncher.launchServer(options);\n  }\n\n  async connect(wsEndpoint: string, options: Parameters<api.Android['connect']>[1] = {}): Promise<api.AndroidDevice> {\n    return await this._wrapApiCall(async () => {\n      const deadline = options.timeout ? monotonicTime() + options.timeout : 0;\n      const headers = { 'x-playwright-browser': 'android', ...options.headers };\n      const localUtils = this._connection.localUtils();\n      const connectParams: channels.LocalUtilsConnectParams = { wsEndpoint, headers, slowMo: options.slowMo, timeout: options.timeout };\n      const { pipe } = await localUtils._channel.connect(connectParams);\n      const closePipe = () => pipe.close().catch(() => {});\n      const connection = new Connection(localUtils, this._instrumentation);\n      connection.markAsRemote();\n      connection.on('close', closePipe);\n\n      let device: AndroidDevice;\n      let closeError: string | undefined;\n      const onPipeClosed = () => {\n        device?._didClose();\n        connection.close(closeError);\n      };\n      pipe.on('closed', onPipeClosed);\n      connection.onmessage = message => pipe.send({ message }).catch(onPipeClosed);\n\n      pipe.on('message', ({ message }) => {\n        try {\n          connection!.dispatch(message);\n        } catch (e) {\n          closeError = String(e);\n          closePipe();\n        }\n      });\n\n      const result = await raceAgainstDeadline(async () => {\n        const playwright = await connection!.initializePlaywright();\n        if (!playwright._initializer.preConnectedAndroidDevice) {\n          closePipe();\n          throw new Error('Malformed endpoint. Did you use Android.launchServer method?');\n        }\n        device = AndroidDevice.from(playwright._initializer.preConnectedAndroidDevice!);\n        device._shouldCloseConnectionOnClose = true;\n        device.on(Events.AndroidDevice.Close, closePipe);\n        return device;\n      }, deadline);\n      if (!result.timedOut) {\n        return result.result;\n      } else {\n        closePipe();\n        throw new Error(`Timeout ${options.timeout}ms exceeded`);\n      }\n    });\n  }\n}\n\nexport class AndroidDevice extends ChannelOwner<channels.AndroidDeviceChannel> implements api.AndroidDevice {\n  readonly _timeoutSettings: TimeoutSettings;\n  private _webViews = new Map<string, AndroidWebView>();\n  _shouldCloseConnectionOnClose = false;\n\n  static from(androidDevice: channels.AndroidDeviceChannel): AndroidDevice {\n    return (androidDevice as any)._object;\n  }\n\n  input: AndroidInput;\n\n  constructor(parent: ChannelOwner, type: string, guid: string, initializer: channels.AndroidDeviceInitializer) {\n    super(parent, type, guid, initializer);\n    this.input = new AndroidInput(this);\n    this._timeoutSettings = new TimeoutSettings((parent as Android)._timeoutSettings);\n    this._channel.on('webViewAdded', ({ webView }) => this._onWebViewAdded(webView));\n    this._channel.on('webViewRemoved', ({ socketName }) => this._onWebViewRemoved(socketName));\n    this._channel.on('close', () => this._didClose());\n  }\n\n  private _onWebViewAdded(webView: channels.AndroidWebView) {\n    const view = new AndroidWebView(this, webView);\n    this._webViews.set(webView.socketName, view);\n    this.emit(Events.AndroidDevice.WebView, view);\n  }\n\n  private _onWebViewRemoved(socketName: string) {\n    const view = this._webViews.get(socketName);\n    this._webViews.delete(socketName);\n    if (view)\n      view.emit(Events.AndroidWebView.Close);\n  }\n\n  setDefaultTimeout(timeout: number) {\n    this._timeoutSettings.setDefaultTimeout(timeout);\n    this._channel.setDefaultTimeoutNoReply({ timeout });\n  }\n\n  serial(): string {\n    return this._initializer.serial;\n  }\n\n  model(): string {\n    return this._initializer.model;\n  }\n\n  webViews(): AndroidWebView[] {\n    return [...this._webViews.values()];\n  }\n\n  async webView(selector: { pkg?: string; socketName?: string; }, options?: types.TimeoutOptions): Promise<AndroidWebView> {\n    const predicate = (v: AndroidWebView) => {\n      if (selector.pkg)\n        return v.pkg() === selector.pkg;\n      if (selector.socketName)\n        return v._socketName() === selector.socketName;\n      return false;\n    };\n    const webView = [...this._webViews.values()].find(predicate);\n    if (webView)\n      return webView;\n    return await this.waitForEvent('webview', { ...options, predicate });\n  }\n\n  async wait(selector: api.AndroidSelector, options?: { state?: 'gone' } & types.TimeoutOptions) {\n    await this._channel.wait({ selector: toSelectorChannel(selector), ...options });\n  }\n\n  async fill(selector: api.AndroidSelector, text: string, options?: types.TimeoutOptions) {\n    await this._channel.fill({ selector: toSelectorChannel(selector), text, ...options });\n  }\n\n  async press(selector: api.AndroidSelector, key: api.AndroidKey, options?: types.TimeoutOptions) {\n    await this.tap(selector, options);\n    await this.input.press(key);\n  }\n\n  async tap(selector: api.AndroidSelector, options?: { duration?: number } & types.TimeoutOptions) {\n    await this._channel.tap({ selector: toSelectorChannel(selector), ...options });\n  }\n\n  async drag(selector: api.AndroidSelector, dest: types.Point, options?: SpeedOptions & types.TimeoutOptions) {\n    await this._channel.drag({ selector: toSelectorChannel(selector), dest, ...options });\n  }\n\n  async fling(selector: api.AndroidSelector, direction: Direction, options?: SpeedOptions & types.TimeoutOptions) {\n    await this._channel.fling({ selector: toSelectorChannel(selector), direction, ...options });\n  }\n\n  async longTap(selector: api.AndroidSelector, options?: types.TimeoutOptions) {\n    await this._channel.longTap({ selector: toSelectorChannel(selector), ...options });\n  }\n\n  async pinchClose(selector: api.AndroidSelector, percent: number, options?: SpeedOptions & types.TimeoutOptions) {\n    await this._channel.pinchClose({ selector: toSelectorChannel(selector), percent, ...options });\n  }\n\n  async pinchOpen(selector: api.AndroidSelector, percent: number, options?: SpeedOptions & types.TimeoutOptions) {\n    await this._channel.pinchOpen({ selector: toSelectorChannel(selector), percent, ...options });\n  }\n\n  async scroll(selector: api.AndroidSelector, direction: Direction, percent: number, options?: SpeedOptions & types.TimeoutOptions) {\n    await this._channel.scroll({ selector: toSelectorChannel(selector), direction, percent, ...options });\n  }\n\n  async swipe(selector: api.AndroidSelector, direction: Direction, percent: number, options?: SpeedOptions & types.TimeoutOptions) {\n    await this._channel.swipe({ selector: toSelectorChannel(selector), direction, percent, ...options });\n  }\n\n  async info(selector: api.AndroidSelector): Promise<api.AndroidElementInfo> {\n    return (await this._channel.info({ selector: toSelectorChannel(selector) })).info;\n  }\n\n  async screenshot(options: { path?: string } = {}): Promise<Buffer> {\n    const { binary } = await this._channel.screenshot();\n    if (options.path)\n      await fs.promises.writeFile(options.path, binary);\n    return binary;\n  }\n\n  async [Symbol.asyncDispose]() {\n    await this.close();\n  }\n\n  async close() {\n    try {\n      if (this._shouldCloseConnectionOnClose)\n        this._connection.close();\n      else\n        await this._channel.close();\n    } catch (e) {\n      if (isTargetClosedError(e))\n        return;\n      throw e;\n    }\n  }\n\n  _didClose() {\n    this.emit(Events.AndroidDevice.Close, this);\n  }\n\n  async shell(command: string): Promise<Buffer> {\n    const { result } = await this._channel.shell({ command });\n    return result;\n  }\n\n  async open(command: string): Promise<AndroidSocket> {\n    return AndroidSocket.from((await this._channel.open({ command })).socket);\n  }\n\n  async installApk(file: string | Buffer, options?: { args: string[] }): Promise<void> {\n    await this._channel.installApk({ file: await loadFile(file), args: options && options.args });\n  }\n\n  async push(file: string | Buffer, path: string, options?: { mode: number }): Promise<void> {\n    await this._channel.push({ file: await loadFile(file), path, mode: options ? options.mode : undefined });\n  }\n\n  async launchBrowser(options: types.BrowserContextOptions & { pkg?: string } = {}): Promise<BrowserContext> {\n    const contextOptions = await prepareBrowserContextParams(options);\n    const result = await this._channel.launchBrowser(contextOptions);\n    const context = BrowserContext.from(result.context) as BrowserContext;\n    context._setOptions(contextOptions, {});\n    return context;\n  }\n\n  async waitForEvent(event: string, optionsOrPredicate: types.WaitForEventOptions = {}): Promise<any> {\n    return await this._wrapApiCall(async () => {\n      const timeout = this._timeoutSettings.timeout(typeof optionsOrPredicate === 'function' ? {} : optionsOrPredicate);\n      const predicate = typeof optionsOrPredicate === 'function' ? optionsOrPredicate : optionsOrPredicate.predicate;\n      const waiter = Waiter.createForEvent(this, event);\n      waiter.rejectOnTimeout(timeout, `Timeout ${timeout}ms exceeded while waiting for event \"${event}\"`);\n      if (event !== Events.AndroidDevice.Close)\n        waiter.rejectOnEvent(this, Events.AndroidDevice.Close, () => new TargetClosedError());\n      const result = await waiter.waitForEvent(this, event, predicate as any);\n      waiter.dispose();\n      return result;\n    });\n  }\n}\n\nexport class AndroidSocket extends ChannelOwner<channels.AndroidSocketChannel> implements api.AndroidSocket {\n  static from(androidDevice: channels.AndroidSocketChannel): AndroidSocket {\n    return (androidDevice as any)._object;\n  }\n\n  constructor(parent: ChannelOwner, type: string, guid: string, initializer: channels.AndroidSocketInitializer) {\n    super(parent, type, guid, initializer);\n    this._channel.on('data', ({ data }) => this.emit(Events.AndroidSocket.Data, data));\n    this._channel.on('close', () => this.emit(Events.AndroidSocket.Close));\n  }\n\n  async write(data: Buffer): Promise<void> {\n    await this._channel.write({ data });\n  }\n\n  async close(): Promise<void> {\n    await this._channel.close();\n  }\n\n  async [Symbol.asyncDispose]() {\n    await this.close();\n  }\n}\n\nasync function loadFile(file: string | Buffer): Promise<Buffer> {\n  if (isString(file))\n    return await fs.promises.readFile(file);\n  return file;\n}\n\nexport class AndroidInput implements api.AndroidInput {\n  private _device: AndroidDevice;\n\n  constructor(device: AndroidDevice) {\n    this._device = device;\n  }\n\n  async type(text: string) {\n    await this._device._channel.inputType({ text });\n  }\n\n  async press(key: api.AndroidKey) {\n    await this._device._channel.inputPress({ key });\n  }\n\n  async tap(point: types.Point) {\n    await this._device._channel.inputTap({ point });\n  }\n\n  async swipe(from: types.Point, segments: types.Point[], steps: number) {\n    await this._device._channel.inputSwipe({ segments, steps });\n  }\n\n  async drag(from: types.Point, to: types.Point, steps: number) {\n    await this._device._channel.inputDrag({ from, to, steps });\n  }\n}\n\nfunction toSelectorChannel(selector: api.AndroidSelector): channels.AndroidSelector {\n  const {\n    checkable,\n    checked,\n    clazz,\n    clickable,\n    depth,\n    desc,\n    enabled,\n    focusable,\n    focused,\n    hasChild,\n    hasDescendant,\n    longClickable,\n    pkg,\n    res,\n    scrollable,\n    selected,\n    text,\n  } = selector;\n\n  const toRegex = (value: RegExp | string | undefined): string | undefined => {\n    if (value === undefined)\n      return undefined;\n    if (isRegExp(value))\n      return value.source;\n    return '^' + value.replace(/[|\\\\{}()[\\]^$+*?.]/g, '\\\\$&').replace(/-/g, '\\\\x2d') + '$';\n  };\n\n  return {\n    checkable,\n    checked,\n    clazz: toRegex(clazz),\n    pkg: toRegex(pkg),\n    desc: toRegex(desc),\n    res: toRegex(res),\n    text: toRegex(text),\n    clickable,\n    depth,\n    enabled,\n    focusable,\n    focused,\n    hasChild: hasChild ? { selector: toSelectorChannel(hasChild.selector) } : undefined,\n    hasDescendant: hasDescendant ? { selector: toSelectorChannel(hasDescendant.selector), maxDepth: hasDescendant.maxDepth } : undefined,\n    longClickable,\n    scrollable,\n    selected,\n  };\n}\n\nexport class AndroidWebView extends EventEmitter implements api.AndroidWebView {\n  private _device: AndroidDevice;\n  private _data: channels.AndroidWebView;\n  private _pagePromise: Promise<Page> | undefined;\n\n  constructor(device: AndroidDevice, data: channels.AndroidWebView) {\n    super();\n    this._device = device;\n    this._data = data;\n  }\n\n  pid(): number {\n    return this._data.pid;\n  }\n\n  pkg(): string {\n    return this._data.pkg;\n  }\n\n  _socketName(): string {\n    return this._data.socketName;\n  }\n\n  async page(): Promise<Page> {\n    if (!this._pagePromise)\n      this._pagePromise = this._fetchPage();\n    return await this._pagePromise;\n  }\n\n  private async _fetchPage(): Promise<Page> {\n    const { context } = await this._device._channel.connectToWebView({ socketName: this._data.socketName });\n    return BrowserContext.from(context).pages()[0];\n  }\n}\n"],"mappings":"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"}