{"version":3,"file":"playwright.js","names":["_errors","require","_android","_browserType","_channelOwner","_electron","_fetch","_selectors","Playwright","ChannelOwner","constructor","parent","type","guid","initializer","_this$_connection$loc","_this$_connection$loc2","_experimentalBidi","chromium","firefox","webkit","devices","selectors","request","errors","APIRequest","BrowserType","from","_playwright","Android","android","Electron","electron","bidi","_connection","localUtils","Selectors","TimeoutError","selectorsOwner","SelectorsOwner","_addChannel","on","_removeChannel","global","_playwrightInstance","_setSelectors","_initializer","channel","_object","exports"],"sources":["../../src/client/playwright.ts"],"sourcesContent":["/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type * as channels from '@protocol/channels';\nimport { TimeoutError } from './errors';\nimport { Android } from './android';\nimport { BrowserType } from './browserType';\nimport { ChannelOwner } from './channelOwner';\nimport { Electron } from './electron';\nimport { APIRequest } from './fetch';\nimport { Selectors, SelectorsOwner } from './selectors';\n\nexport class Playwright extends ChannelOwner<channels.PlaywrightChannel> {\n  readonly _android: Android;\n  readonly _electron: Electron;\n  readonly _experimentalBidi: BrowserType;\n  readonly chromium: BrowserType;\n  readonly firefox: BrowserType;\n  readonly webkit: BrowserType;\n  readonly devices: any;\n  selectors: Selectors;\n  readonly request: APIRequest;\n  readonly errors: { TimeoutError: typeof TimeoutError };\n\n  constructor(parent: ChannelOwner, type: string, guid: string, initializer: channels.PlaywrightInitializer) {\n    super(parent, type, guid, initializer);\n    this.request = new APIRequest(this);\n    this.chromium = BrowserType.from(initializer.chromium);\n    this.chromium._playwright = this;\n    this.firefox = BrowserType.from(initializer.firefox);\n    this.firefox._playwright = this;\n    this.webkit = BrowserType.from(initializer.webkit);\n    this.webkit._playwright = this;\n    this._android = Android.from(initializer.android);\n    this._electron = Electron.from(initializer.electron);\n    this._experimentalBidi = BrowserType.from(initializer.bidi);\n    this._experimentalBidi._playwright = this;\n    this.devices = this._connection.localUtils()?.devices ?? {};\n    this.selectors = new Selectors();\n    this.errors = { TimeoutError };\n\n    const selectorsOwner = SelectorsOwner.from(initializer.selectors);\n    this.selectors._addChannel(selectorsOwner);\n    this._connection.on('close', () => {\n      this.selectors._removeChannel(selectorsOwner);\n    });\n    (global as any)._playwrightInstance = this;\n  }\n\n  _setSelectors(selectors: Selectors) {\n    const selectorsOwner = SelectorsOwner.from(this._initializer.selectors);\n    this.selectors._removeChannel(selectorsOwner);\n    this.selectors = selectors;\n    this.selectors._addChannel(selectorsOwner);\n  }\n\n  static from(channel: channels.PlaywrightChannel): Playwright {\n    return (channel as any)._object;\n  }\n}\n"],"mappings":"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"}