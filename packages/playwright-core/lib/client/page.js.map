{"version":3,"file":"page.js","names":["_fs","_interopRequireDefault","require","_path","_errors","_timeoutSettings","_utils","_accessibility","_artifact","_channelOwner","_clientHelper","_coverage","_download","_elementHandle","_events","_fileChooser","_frame","_input","_jsHandle","_network","_video","_waiter","_worker","_harRouter","_Symbol$asyncDispose","obj","__esModule","default","Symbol","asyncDispose","Page","ChannelOwner","from","page","_object","fromNullable","constructor","parent","type","guid","initializer","_browserContext","_ownedContext","_mainFrame","_frames","Set","_workers","_closed","_closedOrCrashedScope","LongStandingScope","_viewportSize","_routes","accessibility","coverage","keyboard","mouse","request","touchscreen","clock","_bindings","Map","_opener","_closeReason","_closeWasCalled","_harRouters","_locatorHandlers","TimeoutSettings","Accessibility","_channel","Keyboard","Mouse","Touchscreen","Frame","mainFrame","_page","add","viewportSize","isClosed","opener","on","binding","_onBinding","BindingCall","_onClose","_onCrash","url","suggestedFilename","artifact","artifactObject","Artifact","emit","Events","Download","element","isMultiple","FileChooser","ElementHandle","frame","_onFrameAttached","_onFrameDetached","uid","_onLocatorHandlerTriggered","route","_onRoute","Route","_forceVideo","_artifactReady","webSocket","WebSocket","worker","_onWorker","Worker","Coverage","once","Close","close","_closeErrorWithReason","Crash","TargetClosedError","_setEventToSubscriptionMapping","Console","Dialog","Request","Response","RequestFinished","RequestFailed","_parentFrame","_childFrames","FrameAttached","delete","_detached","FrameDetached","_context","context","routeHandlers","slice","routeHandler","matches","index","indexOf","willExpire","splice","handled","handle","length","_wrapApiCall","_updateInterceptionPatterns","catch","bindingCall","func","get","_initializer","name","call","_pages","_backgroundPages","_disposeHarRouters","frameSelector","isString","isObject","undefined","assert","frames","find","f","urlMatches","_options","baseURL","setDefaultNavigationTimeout","timeout","setDefaultNavigationTimeoutNoReply","setDefaultTimeout","setDefaultTimeoutNoReply","Video","_connection","video","recordVideo","$","selector","options","waitForSelector","dispatchEvent","eventInit","evaluateHandle","pageFunction","arg","assertMaxArguments","arguments","$eval","$$eval","$$","addScriptTag","addStyleTag","exposeFunction","callback","exposeBinding","source","args","set","needsHandle","setExtraHTTPHeaders","headers","validateHeaders","headersObjectToArray","content","setContent","html","goto","reload","waitUntil","verifyLoadState","response","addLocatorHandler","locator","handler","Error","times","registerLocatorHandler","_selector","noWaitAfter","remove","resolveLocatorHandlerNoReply","removeLocatorHandler","data","_equals","unregisterLocatorHandler","waitForLoadState","state","waitForNavigation","waitForURL","waitForRequest","urlOrPredicate","predicate","isRegExp","trimmedUrl","trimUrl","logLine","_waitForEvent","waitForResponse","waitForEvent","event","optionsOrPredicate","_effectiveCloseReason","waiter","Waiter","createForEvent","log","rejectOnTimeout","rejectOnEvent","result","dispose","goBack","goForward","emulateMedia","media","colorScheme","reducedMotion","forcedColors","setViewportSize","evaluate","addInitScript","script","evaluationScript","unshift","RouteHandler","routeFromHAR","har","update","_recordIntoHAR","harRouter","HarRouter","create","localUtils","notFound","urlMatch","push","addPageRoute","forEach","router","unrouteAll","_unrouteInternal","behavior","unroute","removed","remaining","urlMatchesEqual","promises","map","stop","Promise","all","patterns","prepareInterceptionPatterns","setNetworkInterceptionPatterns","screenshot","copy","mask","determineScreenshotType","path","mkdirIfNeeded","fs","writeFile","binary","_expectScreenshot","expectScreenshot","isNot","title","bringToFront","reason","e","isTargetClosedError","runBeforeUnload","click","dragAndDrop","target","dblclick","tap","fill","value","getByTestId","testId","getByAltText","text","getByLabel","getByPlaceholder","getByText","getByTitle","getByRole","role","frameLocator","focus","textContent","innerText","innerHTML","getAttribute","inputValue","isChecked","isDisabled","isEditable","isEnabled","isHidden","isVisible","hover","selectOption","values","setInputFiles","files","press","key","check","uncheck","setChecked","checked","waitForTimeout","waitForFunction","workers","pause","_this$_instrumentatio","defaultNavigationTimeout","defaultTimeout","_instrumentation","onWillPause","safeRace","pdf","transportOptions","margin","width","height","mkdir","dirname","recursive","exports","channel","JSHandle","parseResult","resolve","serializeArgument","reject","error","serializeError","param","trimStringWithEllipsis","flags"],"sources":["../../src/client/page.ts"],"sourcesContent":["/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport fs from 'fs';\nimport path from 'path';\nimport type * as structs from '../../types/structs';\nimport type * as api from '../../types/types';\nimport { serializeError, isTargetClosedError, TargetClosedError } from './errors';\nimport { TimeoutSettings } from '../common/timeoutSettings';\nimport type * as channels from '@protocol/channels';\nimport { assert, headersObjectToArray, isObject, isRegExp, isString, LongStandingScope, urlMatches, urlMatchesEqual, mkdirIfNeeded, trimStringWithEllipsis, type URLMatch } from '../utils';\nimport { Accessibility } from './accessibility';\nimport { Artifact } from './artifact';\nimport type { BrowserContext } from './browserContext';\nimport { ChannelOwner } from './channelOwner';\nimport { evaluationScript } from './clientHelper';\nimport { Coverage } from './coverage';\nimport { Download } from './download';\nimport { determineScreenshotType, ElementHandle } from './elementHandle';\nimport { Events } from './events';\nimport type { APIRequestContext } from './fetch';\nimport { FileChooser } from './fileChooser';\nimport type { WaitForNavigationOptions } from './frame';\nimport { Frame, verifyLoadState } from './frame';\nimport { Keyboard, Mouse, Touchscreen } from './input';\nimport { assertMaxArguments, JSHandle, parseResult, serializeArgument } from './jsHandle';\nimport type { FrameLocator, Locator, LocatorOptions } from './locator';\nimport type { ByRoleOptions } from '../utils/isomorphic/locatorUtils';\nimport { type RouteHandlerCallback, type Request, Response, Route, RouteHandler, validateHeaders, WebSocket } from './network';\nimport type { FilePayload, Headers, LifecycleEvent, SelectOption, SelectOptionOptions, Size, WaitForEventOptions, WaitForFunctionOptions } from './types';\nimport { Video } from './video';\nimport { Waiter } from './waiter';\nimport { Worker } from './worker';\nimport { HarRouter } from './harRouter';\nimport type { Clock } from './clock';\n\ntype PDFOptions = Omit<channels.PagePdfParams, 'width' | 'height' | 'margin'> & {\n  width?: string | number,\n  height?: string | number,\n  margin?: {\n    top?: string | number,\n    bottom?: string | number,\n    left?: string | number,\n    right?: string | number\n  },\n  path?: string,\n};\n\nexport type ExpectScreenshotOptions = Omit<channels.PageExpectScreenshotOptions, 'locator' | 'expected' | 'mask'> & {\n  expected?: Buffer,\n  locator?: api.Locator,\n  isNot: boolean,\n  mask?: api.Locator[],\n};\n\nexport class Page extends ChannelOwner<channels.PageChannel> implements api.Page {\n  private _browserContext: BrowserContext;\n  _ownedContext: BrowserContext | undefined;\n\n  private _mainFrame: Frame;\n  private _frames = new Set<Frame>();\n  _workers = new Set<Worker>();\n  private _closed = false;\n  readonly _closedOrCrashedScope = new LongStandingScope();\n  private _viewportSize: Size | null;\n  _routes: RouteHandler[] = [];\n\n  readonly accessibility: Accessibility;\n  readonly coverage: Coverage;\n  readonly keyboard: Keyboard;\n  readonly mouse: Mouse;\n  readonly request: APIRequestContext;\n  readonly touchscreen: Touchscreen;\n  readonly clock: Clock;\n\n\n  readonly _bindings = new Map<string, (source: structs.BindingSource, ...args: any[]) => any>();\n  readonly _timeoutSettings: TimeoutSettings;\n  private _video: Video | null = null;\n  readonly _opener: Page | null;\n  private _closeReason: string | undefined;\n  _closeWasCalled: boolean = false;\n  private _harRouters: HarRouter[] = [];\n\n  private _locatorHandlers = new Map<number, { locator: Locator, handler: (locator: Locator) => any, times: number | undefined }>();\n\n  static from(page: channels.PageChannel): Page {\n    return (page as any)._object;\n  }\n\n  static fromNullable(page: channels.PageChannel | undefined): Page | null {\n    return page ? Page.from(page) : null;\n  }\n\n  constructor(parent: ChannelOwner, type: string, guid: string, initializer: channels.PageInitializer) {\n    super(parent, type, guid, initializer);\n    this._browserContext = parent as unknown as BrowserContext;\n    this._timeoutSettings = new TimeoutSettings(this._browserContext._timeoutSettings);\n\n    this.accessibility = new Accessibility(this._channel);\n    this.keyboard = new Keyboard(this);\n    this.mouse = new Mouse(this);\n    this.request = this._browserContext.request;\n    this.touchscreen = new Touchscreen(this);\n    this.clock = this._browserContext.clock;\n\n    this._mainFrame = Frame.from(initializer.mainFrame);\n    this._mainFrame._page = this;\n    this._frames.add(this._mainFrame);\n    this._viewportSize = initializer.viewportSize || null;\n    this._closed = initializer.isClosed;\n    this._opener = Page.fromNullable(initializer.opener);\n\n    this._channel.on('bindingCall', ({ binding }) => this._onBinding(BindingCall.from(binding)));\n    this._channel.on('close', () => this._onClose());\n    this._channel.on('crash', () => this._onCrash());\n    this._channel.on('download', ({ url, suggestedFilename, artifact }) => {\n      const artifactObject = Artifact.from(artifact);\n      this.emit(Events.Page.Download, new Download(this, url, suggestedFilename, artifactObject));\n    });\n    this._channel.on('fileChooser', ({ element, isMultiple }) => this.emit(Events.Page.FileChooser, new FileChooser(this, ElementHandle.from(element), isMultiple)));\n    this._channel.on('frameAttached', ({ frame }) => this._onFrameAttached(Frame.from(frame)));\n    this._channel.on('frameDetached', ({ frame }) => this._onFrameDetached(Frame.from(frame)));\n    this._channel.on('locatorHandlerTriggered', ({ uid }) => this._onLocatorHandlerTriggered(uid));\n    this._channel.on('route', ({ route }) => this._onRoute(Route.from(route)));\n    this._channel.on('video', ({ artifact }) => {\n      const artifactObject = Artifact.from(artifact);\n      this._forceVideo()._artifactReady(artifactObject);\n    });\n    this._channel.on('webSocket', ({ webSocket }) => this.emit(Events.Page.WebSocket, WebSocket.from(webSocket)));\n    this._channel.on('worker', ({ worker }) => this._onWorker(Worker.from(worker)));\n\n    this.coverage = new Coverage(this._channel);\n\n    this.once(Events.Page.Close, () => this._closedOrCrashedScope.close(this._closeErrorWithReason()));\n    this.once(Events.Page.Crash, () => this._closedOrCrashedScope.close(new TargetClosedError()));\n\n    this._setEventToSubscriptionMapping(new Map<string, channels.PageUpdateSubscriptionParams['event']>([\n      [Events.Page.Console, 'console'],\n      [Events.Page.Dialog, 'dialog'],\n      [Events.Page.Request, 'request'],\n      [Events.Page.Response, 'response'],\n      [Events.Page.RequestFinished, 'requestFinished'],\n      [Events.Page.RequestFailed, 'requestFailed'],\n      [Events.Page.FileChooser, 'fileChooser'],\n    ]));\n  }\n\n  private _onFrameAttached(frame: Frame) {\n    frame._page = this;\n    this._frames.add(frame);\n    if (frame._parentFrame)\n      frame._parentFrame._childFrames.add(frame);\n    this.emit(Events.Page.FrameAttached, frame);\n  }\n\n  private _onFrameDetached(frame: Frame) {\n    this._frames.delete(frame);\n    frame._detached = true;\n    if (frame._parentFrame)\n      frame._parentFrame._childFrames.delete(frame);\n    this.emit(Events.Page.FrameDetached, frame);\n  }\n\n  private async _onRoute(route: Route) {\n    route._context = this.context();\n    const routeHandlers = this._routes.slice();\n    for (const routeHandler of routeHandlers) {\n      // If the page was closed we stall all requests right away.\n      if (this._closeWasCalled || this._browserContext._closeWasCalled)\n        return;\n      if (!routeHandler.matches(route.request().url()))\n        continue;\n      const index = this._routes.indexOf(routeHandler);\n      if (index === -1)\n        continue;\n      if (routeHandler.willExpire())\n        this._routes.splice(index, 1);\n      const handled = await routeHandler.handle(route);\n      if (!this._routes.length)\n        this._wrapApiCall(() => this._updateInterceptionPatterns(), true).catch(() => {});\n      if (handled)\n        return;\n    }\n\n    await this._browserContext._onRoute(route);\n  }\n\n  async _onBinding(bindingCall: BindingCall) {\n    const func = this._bindings.get(bindingCall._initializer.name);\n    if (func) {\n      await bindingCall.call(func);\n      return;\n    }\n    await this._browserContext._onBinding(bindingCall);\n  }\n\n  _onWorker(worker: Worker): void {\n    this._workers.add(worker);\n    worker._page = this;\n    this.emit(Events.Page.Worker, worker);\n  }\n\n  _onClose() {\n    this._closed = true;\n    this._browserContext._pages.delete(this);\n    this._browserContext._backgroundPages.delete(this);\n    this._disposeHarRouters();\n    this.emit(Events.Page.Close, this);\n  }\n\n  private _onCrash() {\n    this.emit(Events.Page.Crash, this);\n  }\n\n  context(): BrowserContext {\n    return this._browserContext;\n  }\n\n  async opener(): Promise<Page | null> {\n    if (!this._opener || this._opener.isClosed())\n      return null;\n    return this._opener;\n  }\n\n  mainFrame(): Frame {\n    return this._mainFrame;\n  }\n\n  frame(frameSelector: string | { name?: string, url?: URLMatch }): Frame | null {\n    const name = isString(frameSelector) ? frameSelector : frameSelector.name;\n    const url = isObject(frameSelector) ? frameSelector.url : undefined;\n    assert(name || url, 'Either name or url matcher should be specified');\n    return this.frames().find(f => {\n      if (name)\n        return f.name() === name;\n      return urlMatches(this._browserContext._options.baseURL, f.url(), url);\n    }) || null;\n  }\n\n  frames(): Frame[] {\n    return [...this._frames];\n  }\n\n  setDefaultNavigationTimeout(timeout: number) {\n    this._timeoutSettings.setDefaultNavigationTimeout(timeout);\n    this._wrapApiCall(async () => {\n      this._channel.setDefaultNavigationTimeoutNoReply({ timeout }).catch(() => {});\n    }, true);\n  }\n\n  setDefaultTimeout(timeout: number) {\n    this._timeoutSettings.setDefaultTimeout(timeout);\n    this._wrapApiCall(async () => {\n      this._channel.setDefaultTimeoutNoReply({ timeout }).catch(() => {});\n    }, true);\n  }\n\n  private _forceVideo(): Video {\n    if (!this._video)\n      this._video = new Video(this, this._connection);\n    return this._video;\n  }\n\n  video(): Video | null {\n    // Note: we are creating Video object lazily, because we do not know\n    // BrowserContextOptions when constructing the page - it is assigned\n    // too late during launchPersistentContext.\n    if (!this._browserContext._options.recordVideo)\n      return null;\n    return this._forceVideo();\n  }\n\n  async $(selector: string, options?: { strict?: boolean }): Promise<ElementHandle<SVGElement | HTMLElement> | null> {\n    return await this._mainFrame.$(selector, options);\n  }\n\n  waitForSelector(selector: string, options: channels.FrameWaitForSelectorOptions & { state: 'attached' | 'visible' }): Promise<ElementHandle<SVGElement | HTMLElement>>;\n  waitForSelector(selector: string, options?: channels.FrameWaitForSelectorOptions): Promise<ElementHandle<SVGElement | HTMLElement> | null>;\n  async waitForSelector(selector: string, options?: channels.FrameWaitForSelectorOptions): Promise<ElementHandle<SVGElement | HTMLElement> | null> {\n    return await this._mainFrame.waitForSelector(selector, options);\n  }\n\n  async dispatchEvent(selector: string, type: string, eventInit?: any, options?: channels.FrameDispatchEventOptions): Promise<void> {\n    return await this._mainFrame.dispatchEvent(selector, type, eventInit, options);\n  }\n\n  async evaluateHandle<R, Arg>(pageFunction: structs.PageFunction<Arg, R>, arg?: Arg): Promise<structs.SmartHandle<R>> {\n    assertMaxArguments(arguments.length, 2);\n    return await this._mainFrame.evaluateHandle(pageFunction, arg);\n  }\n\n  async $eval<R, Arg>(selector: string, pageFunction: structs.PageFunctionOn<Element, Arg, R>, arg?: Arg): Promise<R> {\n    assertMaxArguments(arguments.length, 3);\n    return await this._mainFrame.$eval(selector, pageFunction, arg);\n  }\n\n  async $$eval<R, Arg>(selector: string, pageFunction: structs.PageFunctionOn<Element[], Arg, R>, arg?: Arg): Promise<R> {\n    assertMaxArguments(arguments.length, 3);\n    return await this._mainFrame.$$eval(selector, pageFunction, arg);\n  }\n\n  async $$(selector: string): Promise<ElementHandle<SVGElement | HTMLElement>[]> {\n    return await this._mainFrame.$$(selector);\n  }\n\n  async addScriptTag(options: { url?: string; path?: string; content?: string; type?: string; } = {}): Promise<ElementHandle> {\n    return await this._mainFrame.addScriptTag(options);\n  }\n\n  async addStyleTag(options: { url?: string; path?: string; content?: string; } = {}): Promise<ElementHandle> {\n    return await this._mainFrame.addStyleTag(options);\n  }\n\n  async exposeFunction(name: string, callback: Function) {\n    await this._channel.exposeBinding({ name });\n    const binding = (source: structs.BindingSource, ...args: any[]) => callback(...args);\n    this._bindings.set(name, binding);\n  }\n\n  async exposeBinding(name: string, callback: (source: structs.BindingSource, ...args: any[]) => any, options: { handle?: boolean } = {}) {\n    await this._channel.exposeBinding({ name, needsHandle: options.handle });\n    this._bindings.set(name, callback);\n  }\n\n  async setExtraHTTPHeaders(headers: Headers) {\n    validateHeaders(headers);\n    await this._channel.setExtraHTTPHeaders({ headers: headersObjectToArray(headers) });\n  }\n\n  url(): string {\n    return this._mainFrame.url();\n  }\n\n  async content(): Promise<string> {\n    return await this._mainFrame.content();\n  }\n\n  async setContent(html: string, options?: channels.FrameSetContentOptions): Promise<void> {\n    return await this._mainFrame.setContent(html, options);\n  }\n\n  async goto(url: string, options?: channels.FrameGotoOptions): Promise<Response | null> {\n    return await this._mainFrame.goto(url, options);\n  }\n\n  async reload(options: channels.PageReloadOptions = {}): Promise<Response | null> {\n    const waitUntil = verifyLoadState('waitUntil', options.waitUntil === undefined ? 'load' : options.waitUntil);\n    return Response.fromNullable((await this._channel.reload({ ...options, waitUntil })).response);\n  }\n\n  async addLocatorHandler(locator: Locator, handler: (locator: Locator) => any, options: { times?: number, noWaitAfter?: boolean } = {}): Promise<void> {\n    if (locator._frame !== this._mainFrame)\n      throw new Error(`Locator must belong to the main frame of this page`);\n    if (options.times === 0)\n      return;\n    const { uid } = await this._channel.registerLocatorHandler({ selector: locator._selector, noWaitAfter: options.noWaitAfter });\n    this._locatorHandlers.set(uid, { locator, handler, times: options.times });\n  }\n\n  private async _onLocatorHandlerTriggered(uid: number) {\n    let remove = false;\n    try {\n      const handler = this._locatorHandlers.get(uid);\n      if (handler && handler.times !== 0) {\n        if (handler.times !== undefined)\n          handler.times--;\n        await handler.handler(handler.locator);\n      }\n      remove = handler?.times === 0;\n    } finally {\n      if (remove)\n        this._locatorHandlers.delete(uid);\n      this._wrapApiCall(() => this._channel.resolveLocatorHandlerNoReply({ uid, remove }), true).catch(() => {});\n    }\n  }\n\n  async removeLocatorHandler(locator: Locator): Promise<void> {\n    for (const [uid, data] of this._locatorHandlers) {\n      if (data.locator._equals(locator)) {\n        this._locatorHandlers.delete(uid);\n        await this._channel.unregisterLocatorHandler({ uid }).catch(() => {});\n      }\n    }\n  }\n\n  async waitForLoadState(state?: LifecycleEvent, options?: { timeout?: number }): Promise<void> {\n    return await this._mainFrame.waitForLoadState(state, options);\n  }\n\n  async waitForNavigation(options?: WaitForNavigationOptions): Promise<Response | null> {\n    return await this._mainFrame.waitForNavigation(options);\n  }\n\n  async waitForURL(url: URLMatch, options?: { waitUntil?: LifecycleEvent, timeout?: number }): Promise<void> {\n    return await this._mainFrame.waitForURL(url, options);\n  }\n\n  async waitForRequest(urlOrPredicate: string | RegExp | ((r: Request) => boolean | Promise<boolean>), options: { timeout?: number } = {}): Promise<Request> {\n    const predicate = async (request: Request) => {\n      if (isString(urlOrPredicate) || isRegExp(urlOrPredicate))\n        return urlMatches(this._browserContext._options.baseURL, request.url(), urlOrPredicate);\n      return await urlOrPredicate(request);\n    };\n    const trimmedUrl = trimUrl(urlOrPredicate);\n    const logLine = trimmedUrl ? `waiting for request ${trimmedUrl}` : undefined;\n    return await this._waitForEvent(Events.Page.Request, { predicate, timeout: options.timeout }, logLine);\n  }\n\n  async waitForResponse(urlOrPredicate: string | RegExp | ((r: Response) => boolean | Promise<boolean>), options: { timeout?: number } = {}): Promise<Response> {\n    const predicate = async (response: Response) => {\n      if (isString(urlOrPredicate) || isRegExp(urlOrPredicate))\n        return urlMatches(this._browserContext._options.baseURL, response.url(), urlOrPredicate);\n      return await urlOrPredicate(response);\n    };\n    const trimmedUrl = trimUrl(urlOrPredicate);\n    const logLine = trimmedUrl ? `waiting for response ${trimmedUrl}` : undefined;\n    return await this._waitForEvent(Events.Page.Response, { predicate, timeout: options.timeout }, logLine);\n  }\n\n  async waitForEvent(event: string, optionsOrPredicate: WaitForEventOptions = {}): Promise<any> {\n    return await this._waitForEvent(event, optionsOrPredicate, `waiting for event \"${event}\"`);\n  }\n\n  _closeErrorWithReason(): TargetClosedError {\n    return new TargetClosedError(this._closeReason || this._browserContext._effectiveCloseReason());\n  }\n\n  private async _waitForEvent(event: string, optionsOrPredicate: WaitForEventOptions, logLine?: string): Promise<any> {\n    return await this._wrapApiCall(async () => {\n      const timeout = this._timeoutSettings.timeout(typeof optionsOrPredicate === 'function' ? {} : optionsOrPredicate);\n      const predicate = typeof optionsOrPredicate === 'function' ? optionsOrPredicate : optionsOrPredicate.predicate;\n      const waiter = Waiter.createForEvent(this, event);\n      if (logLine)\n        waiter.log(logLine);\n      waiter.rejectOnTimeout(timeout, `Timeout ${timeout}ms exceeded while waiting for event \"${event}\"`);\n      if (event !== Events.Page.Crash)\n        waiter.rejectOnEvent(this, Events.Page.Crash, new Error('Page crashed'));\n      if (event !== Events.Page.Close)\n        waiter.rejectOnEvent(this, Events.Page.Close, () => this._closeErrorWithReason());\n      const result = await waiter.waitForEvent(this, event, predicate as any);\n      waiter.dispose();\n      return result;\n    });\n  }\n\n  async goBack(options: channels.PageGoBackOptions = {}): Promise<Response | null> {\n    const waitUntil = verifyLoadState('waitUntil', options.waitUntil === undefined ? 'load' : options.waitUntil);\n    return Response.fromNullable((await this._channel.goBack({ ...options, waitUntil })).response);\n  }\n\n  async goForward(options: channels.PageGoForwardOptions = {}): Promise<Response | null> {\n    const waitUntil = verifyLoadState('waitUntil', options.waitUntil === undefined ? 'load' : options.waitUntil);\n    return Response.fromNullable((await this._channel.goForward({ ...options, waitUntil })).response);\n  }\n\n  async emulateMedia(options: { media?: 'screen' | 'print' | null, colorScheme?: 'dark' | 'light' | 'no-preference' | null, reducedMotion?: 'reduce' | 'no-preference' | null, forcedColors?: 'active' | 'none' | null } = {}) {\n    await this._channel.emulateMedia({\n      media: options.media === null ? 'no-override' : options.media,\n      colorScheme: options.colorScheme === null ? 'no-override' : options.colorScheme,\n      reducedMotion: options.reducedMotion === null ? 'no-override' : options.reducedMotion,\n      forcedColors: options.forcedColors === null ? 'no-override' : options.forcedColors,\n    });\n  }\n\n  async setViewportSize(viewportSize: Size) {\n    this._viewportSize = viewportSize;\n    await this._channel.setViewportSize({ viewportSize });\n  }\n\n  viewportSize(): Size | null {\n    return this._viewportSize;\n  }\n\n  async evaluate<R, Arg>(pageFunction: structs.PageFunction<Arg, R>, arg?: Arg): Promise<R> {\n    assertMaxArguments(arguments.length, 2);\n    return await this._mainFrame.evaluate(pageFunction, arg);\n  }\n\n  async addInitScript(script: Function | string | { path?: string, content?: string }, arg?: any) {\n    const source = await evaluationScript(script, arg);\n    await this._channel.addInitScript({ source });\n  }\n\n  async route(url: URLMatch, handler: RouteHandlerCallback, options: { times?: number } = {}): Promise<void> {\n    this._routes.unshift(new RouteHandler(this._browserContext._options.baseURL, url, handler, options.times));\n    await this._updateInterceptionPatterns();\n  }\n\n  async routeFromHAR(har: string, options: { url?: string | RegExp, notFound?: 'abort' | 'fallback', update?: boolean, updateContent?: 'attach' | 'embed', updateMode?: 'minimal' | 'full'} = {}): Promise<void> {\n    if (options.update) {\n      await this._browserContext._recordIntoHAR(har, this, options);\n      return;\n    }\n    const harRouter = await HarRouter.create(this._connection.localUtils(), har, options.notFound || 'abort', { urlMatch: options.url });\n    this._harRouters.push(harRouter);\n    await harRouter.addPageRoute(this);\n  }\n\n  private _disposeHarRouters() {\n    this._harRouters.forEach(router => router.dispose());\n    this._harRouters = [];\n  }\n\n  async unrouteAll(options?: { behavior?: 'wait'|'ignoreErrors'|'default' }): Promise<void> {\n    await this._unrouteInternal(this._routes, [], options?.behavior);\n    this._disposeHarRouters();\n  }\n\n  async unroute(url: URLMatch, handler?: RouteHandlerCallback): Promise<void> {\n    const removed = [];\n    const remaining = [];\n    for (const route of this._routes) {\n      if (urlMatchesEqual(route.url, url) && (!handler || route.handler === handler))\n        removed.push(route);\n      else\n        remaining.push(route);\n    }\n    await this._unrouteInternal(removed, remaining, 'default');\n  }\n\n  private async _unrouteInternal(removed: RouteHandler[], remaining: RouteHandler[], behavior?: 'wait'|'ignoreErrors'|'default'): Promise<void> {\n    this._routes = remaining;\n    await this._updateInterceptionPatterns();\n    if (!behavior || behavior === 'default')\n      return;\n    const promises = removed.map(routeHandler => routeHandler.stop(behavior));\n    await Promise.all(promises);\n  }\n\n  private async _updateInterceptionPatterns() {\n    const patterns = RouteHandler.prepareInterceptionPatterns(this._routes);\n    await this._channel.setNetworkInterceptionPatterns({ patterns });\n  }\n\n  async screenshot(options: Omit<channels.PageScreenshotOptions, 'mask'> & { path?: string, mask?: Locator[] } = {}): Promise<Buffer> {\n    const copy: channels.PageScreenshotOptions = { ...options, mask: undefined };\n    if (!copy.type)\n      copy.type = determineScreenshotType(options);\n    if (options.mask) {\n      copy.mask = options.mask.map(locator => ({\n        frame: locator._frame._channel,\n        selector: locator._selector,\n      }));\n    }\n    const result = await this._channel.screenshot(copy);\n    if (options.path) {\n      await mkdirIfNeeded(options.path);\n      await fs.promises.writeFile(options.path, result.binary);\n    }\n    return result.binary;\n  }\n\n  async _expectScreenshot(options: ExpectScreenshotOptions): Promise<{ actual?: Buffer, previous?: Buffer, diff?: Buffer, errorMessage?: string, log?: string[]}> {\n    const mask = options?.mask ? options?.mask.map(locator => ({\n      frame: (locator as Locator)._frame._channel,\n      selector: (locator as Locator)._selector,\n    })) : undefined;\n    const locator = options.locator ? {\n      frame: (options.locator as Locator)._frame._channel,\n      selector: (options.locator as Locator)._selector,\n    } : undefined;\n    return await this._channel.expectScreenshot({\n      ...options,\n      isNot: !!options.isNot,\n      locator,\n      mask,\n    });\n  }\n\n  async title(): Promise<string> {\n    return await this._mainFrame.title();\n  }\n\n  async bringToFront(): Promise<void> {\n    await this._channel.bringToFront();\n  }\n\n  async [Symbol.asyncDispose]() {\n    await this.close();\n  }\n\n  async close(options: { runBeforeUnload?: boolean, reason?: string } = {}) {\n    this._closeReason = options.reason;\n    this._closeWasCalled = true;\n    try {\n      if (this._ownedContext)\n        await this._ownedContext.close();\n      else\n        await this._channel.close(options);\n    } catch (e) {\n      if (isTargetClosedError(e) && !options.runBeforeUnload)\n        return;\n      throw e;\n    }\n  }\n\n  isClosed(): boolean {\n    return this._closed;\n  }\n\n  async click(selector: string, options?: channels.FrameClickOptions) {\n    return await this._mainFrame.click(selector, options);\n  }\n\n  async dragAndDrop(source: string, target: string, options?: channels.FrameDragAndDropOptions) {\n    return await this._mainFrame.dragAndDrop(source, target, options);\n  }\n\n  async dblclick(selector: string, options?: channels.FrameDblclickOptions) {\n    return await this._mainFrame.dblclick(selector, options);\n  }\n\n  async tap(selector: string, options?: channels.FrameTapOptions) {\n    return await this._mainFrame.tap(selector, options);\n  }\n\n  async fill(selector: string, value: string, options?: channels.FrameFillOptions) {\n    return await this._mainFrame.fill(selector, value, options);\n  }\n\n  locator(selector: string, options?: LocatorOptions): Locator {\n    return this.mainFrame().locator(selector, options);\n  }\n\n  getByTestId(testId: string | RegExp): Locator {\n    return this.mainFrame().getByTestId(testId);\n  }\n\n  getByAltText(text: string | RegExp, options?: { exact?: boolean }): Locator {\n    return this.mainFrame().getByAltText(text, options);\n  }\n\n  getByLabel(text: string | RegExp, options?: { exact?: boolean }): Locator {\n    return this.mainFrame().getByLabel(text, options);\n  }\n\n  getByPlaceholder(text: string | RegExp, options?: { exact?: boolean }): Locator {\n    return this.mainFrame().getByPlaceholder(text, options);\n  }\n\n  getByText(text: string | RegExp, options?: { exact?: boolean }): Locator {\n    return this.mainFrame().getByText(text, options);\n  }\n\n  getByTitle(text: string | RegExp, options?: { exact?: boolean }): Locator {\n    return this.mainFrame().getByTitle(text, options);\n  }\n\n  getByRole(role: string, options: ByRoleOptions = {}): Locator {\n    return this.mainFrame().getByRole(role, options);\n  }\n\n  frameLocator(selector: string): FrameLocator {\n    return this.mainFrame().frameLocator(selector);\n  }\n\n  async focus(selector: string, options?: channels.FrameFocusOptions) {\n    return await this._mainFrame.focus(selector, options);\n  }\n\n  async textContent(selector: string, options?: channels.FrameTextContentOptions): Promise<null|string> {\n    return await this._mainFrame.textContent(selector, options);\n  }\n\n  async innerText(selector: string, options?: channels.FrameInnerTextOptions): Promise<string> {\n    return await this._mainFrame.innerText(selector, options);\n  }\n\n  async innerHTML(selector: string, options?: channels.FrameInnerHTMLOptions): Promise<string> {\n    return await this._mainFrame.innerHTML(selector, options);\n  }\n\n  async getAttribute(selector: string, name: string, options?: channels.FrameGetAttributeOptions): Promise<string | null> {\n    return await this._mainFrame.getAttribute(selector, name, options);\n  }\n\n  async inputValue(selector: string, options?: channels.FrameInputValueOptions): Promise<string> {\n    return await this._mainFrame.inputValue(selector, options);\n  }\n\n  async isChecked(selector: string, options?: channels.FrameIsCheckedOptions): Promise<boolean> {\n    return await this._mainFrame.isChecked(selector, options);\n  }\n\n  async isDisabled(selector: string, options?: channels.FrameIsDisabledOptions): Promise<boolean> {\n    return await this._mainFrame.isDisabled(selector, options);\n  }\n\n  async isEditable(selector: string, options?: channels.FrameIsEditableOptions): Promise<boolean> {\n    return await this._mainFrame.isEditable(selector, options);\n  }\n\n  async isEnabled(selector: string, options?: channels.FrameIsEnabledOptions): Promise<boolean> {\n    return await this._mainFrame.isEnabled(selector, options);\n  }\n\n  async isHidden(selector: string, options?: channels.FrameIsHiddenOptions): Promise<boolean> {\n    return await this._mainFrame.isHidden(selector, options);\n  }\n\n  async isVisible(selector: string, options?: channels.FrameIsVisibleOptions): Promise<boolean> {\n    return await this._mainFrame.isVisible(selector, options);\n  }\n\n  async hover(selector: string, options?: channels.FrameHoverOptions) {\n    return await this._mainFrame.hover(selector, options);\n  }\n\n  async selectOption(selector: string, values: string | api.ElementHandle | SelectOption | string[] | api.ElementHandle[] | SelectOption[] | null, options?: SelectOptionOptions): Promise<string[]> {\n    return await this._mainFrame.selectOption(selector, values, options);\n  }\n\n  async setInputFiles(selector: string, files: string | FilePayload | string[] | FilePayload[], options?: channels.FrameSetInputFilesOptions): Promise<void> {\n    return await this._mainFrame.setInputFiles(selector, files, options);\n  }\n\n  async type(selector: string, text: string, options?: channels.FrameTypeOptions) {\n    return await this._mainFrame.type(selector, text, options);\n  }\n\n  async press(selector: string, key: string, options?: channels.FramePressOptions) {\n    return await this._mainFrame.press(selector, key, options);\n  }\n\n  async check(selector: string, options?: channels.FrameCheckOptions) {\n    return await this._mainFrame.check(selector, options);\n  }\n\n  async uncheck(selector: string, options?: channels.FrameUncheckOptions) {\n    return await this._mainFrame.uncheck(selector, options);\n  }\n\n  async setChecked(selector: string, checked: boolean, options?: channels.FrameCheckOptions) {\n    return await this._mainFrame.setChecked(selector, checked, options);\n  }\n\n  async waitForTimeout(timeout: number) {\n    return await this._mainFrame.waitForTimeout(timeout);\n  }\n\n  async waitForFunction<R, Arg>(pageFunction: structs.PageFunction<Arg, R>, arg?: Arg, options?: WaitForFunctionOptions): Promise<structs.SmartHandle<R>> {\n    return await this._mainFrame.waitForFunction(pageFunction, arg, options);\n  }\n\n  workers(): Worker[] {\n    return [...this._workers];\n  }\n\n  async pause() {\n    if (require('inspector').url())\n      return;\n    const defaultNavigationTimeout = this._browserContext._timeoutSettings.defaultNavigationTimeout();\n    const defaultTimeout = this._browserContext._timeoutSettings.defaultTimeout();\n    this._browserContext.setDefaultNavigationTimeout(0);\n    this._browserContext.setDefaultTimeout(0);\n    this._instrumentation?.onWillPause();\n    await this._closedOrCrashedScope.safeRace(this.context()._channel.pause());\n    this._browserContext.setDefaultNavigationTimeout(defaultNavigationTimeout);\n    this._browserContext.setDefaultTimeout(defaultTimeout);\n  }\n\n  async pdf(options: PDFOptions = {}): Promise<Buffer> {\n    const transportOptions: channels.PagePdfParams = { ...options } as channels.PagePdfParams;\n    if (transportOptions.margin)\n      transportOptions.margin = { ...transportOptions.margin };\n    if (typeof options.width === 'number')\n      transportOptions.width = options.width + 'px';\n    if (typeof options.height === 'number')\n      transportOptions.height  = options.height + 'px';\n    for (const margin of ['top', 'right', 'bottom', 'left']) {\n      const index = margin as 'top' | 'right' | 'bottom' | 'left';\n      if (options.margin && typeof options.margin[index] === 'number')\n        transportOptions.margin![index] = transportOptions.margin![index] + 'px';\n    }\n    const result = await this._channel.pdf(transportOptions);\n    if (options.path) {\n      await fs.promises.mkdir(path.dirname(options.path), { recursive: true });\n      await fs.promises.writeFile(options.path, result.pdf);\n    }\n    return result.pdf;\n  }\n}\n\nexport class BindingCall extends ChannelOwner<channels.BindingCallChannel> {\n  static from(channel: channels.BindingCallChannel): BindingCall {\n    return (channel as any)._object;\n  }\n\n  constructor(parent: ChannelOwner, type: string, guid: string, initializer: channels.BindingCallInitializer) {\n    super(parent, type, guid, initializer);\n  }\n\n  async call(func: (source: structs.BindingSource, ...args: any[]) => any) {\n    try {\n      const frame = Frame.from(this._initializer.frame);\n      const source = {\n        context: frame._page!.context(),\n        page: frame._page!,\n        frame\n      };\n      let result: any;\n      if (this._initializer.handle)\n        result = await func(source, JSHandle.from(this._initializer.handle));\n      else\n        result = await func(source, ...this._initializer.args!.map(parseResult));\n      this._channel.resolve({ result: serializeArgument(result) }).catch(() => {});\n    } catch (e) {\n      this._channel.reject({ error: serializeError(e) }).catch(() => {});\n    }\n  }\n}\n\nfunction trimUrl(param: any): string | undefined {\n  if (isRegExp(param))\n    return `/${trimStringWithEllipsis(param.source, 50)}/${param.flags}`;\n  if (isString(param))\n    return `\"${trimStringWithEllipsis(param, 50)}\"`;\n}\n"],"mappings":"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"}