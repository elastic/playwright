{"version":3,"file":"errors.js","names":["_utils","require","_serializers","TimeoutError","Error","constructor","message","name","exports","TargetClosedError","cause","isTargetClosedError","error","serializeError","e","isError","stack","value","serializeValue","fallThrough","parseError","undefined","parseSerializedValue"],"sources":["../../src/client/errors.ts"],"sourcesContent":["/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { SerializedError } from '@protocol/channels';\nimport { isError } from '../utils';\nimport { parseSerializedValue, serializeValue } from '../protocol/serializers';\n\nexport class TimeoutError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'TimeoutError';\n  }\n}\n\nexport class TargetClosedError extends Error {\n  constructor(cause?: string) {\n    super(cause || 'Target page, context or browser has been closed');\n  }\n}\n\nexport function isTargetClosedError(error: Error) {\n  return error instanceof TargetClosedError;\n}\n\nexport function serializeError(e: any): SerializedError {\n  if (isError(e))\n    return { error: { message: e.message, stack: e.stack, name: e.name } };\n  return { value: serializeValue(e, value => ({ fallThrough: value })) };\n}\n\nexport function parseError(error: SerializedError): Error {\n  if (!error.error) {\n    if (error.value === undefined)\n      throw new Error('Serialized error must have either an error or a value');\n    return parseSerializedValue(error.value, undefined);\n  }\n  if (error.error.name === 'TimeoutError') {\n    const e = new TimeoutError(error.error.message);\n    e.stack = error.error.stack || '';\n    return e;\n  }\n  if (error.error.name === 'TargetClosedError') {\n    const e = new TargetClosedError(error.error.message);\n    e.stack = error.error.stack || '';\n    return e;\n  }\n  const e = new Error(error.error.message);\n  e.stack = error.error.stack || '';\n  e.name = error.error.name;\n  return e;\n}\n"],"mappings":";;;;;;;;;AAiBA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,YAAA,GAAAD,OAAA;AAlBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAMO,MAAME,YAAY,SAASC,KAAK,CAAC;EACtCC,WAAWA,CAACC,OAAe,EAAE;IAC3B,KAAK,CAACA,OAAO,CAAC;IACd,IAAI,CAACC,IAAI,GAAG,cAAc;EAC5B;AACF;AAACC,OAAA,CAAAL,YAAA,GAAAA,YAAA;AAEM,MAAMM,iBAAiB,SAASL,KAAK,CAAC;EAC3CC,WAAWA,CAACK,KAAc,EAAE;IAC1B,KAAK,CAACA,KAAK,IAAI,iDAAiD,CAAC;EACnE;AACF;AAACF,OAAA,CAAAC,iBAAA,GAAAA,iBAAA;AAEM,SAASE,mBAAmBA,CAACC,KAAY,EAAE;EAChD,OAAOA,KAAK,YAAYH,iBAAiB;AAC3C;AAEO,SAASI,cAAcA,CAACC,CAAM,EAAmB;EACtD,IAAI,IAAAC,cAAO,EAACD,CAAC,CAAC,EACZ,OAAO;IAAEF,KAAK,EAAE;MAAEN,OAAO,EAAEQ,CAAC,CAACR,OAAO;MAAEU,KAAK,EAAEF,CAAC,CAACE,KAAK;MAAET,IAAI,EAAEO,CAAC,CAACP;IAAK;EAAE,CAAC;EACxE,OAAO;IAAEU,KAAK,EAAE,IAAAC,2BAAc,EAACJ,CAAC,EAAEG,KAAK,KAAK;MAAEE,WAAW,EAAEF;IAAM,CAAC,CAAC;EAAE,CAAC;AACxE;AAEO,SAASG,UAAUA,CAACR,KAAsB,EAAS;EACxD,IAAI,CAACA,KAAK,CAACA,KAAK,EAAE;IAChB,IAAIA,KAAK,CAACK,KAAK,KAAKI,SAAS,EAC3B,MAAM,IAAIjB,KAAK,CAAC,uDAAuD,CAAC;IAC1E,OAAO,IAAAkB,iCAAoB,EAACV,KAAK,CAACK,KAAK,EAAEI,SAAS,CAAC;EACrD;EACA,IAAIT,KAAK,CAACA,KAAK,CAACL,IAAI,KAAK,cAAc,EAAE;IACvC,MAAMO,CAAC,GAAG,IAAIX,YAAY,CAACS,KAAK,CAACA,KAAK,CAACN,OAAO,CAAC;IAC/CQ,CAAC,CAACE,KAAK,GAAGJ,KAAK,CAACA,KAAK,CAACI,KAAK,IAAI,EAAE;IACjC,OAAOF,CAAC;EACV;EACA,IAAIF,KAAK,CAACA,KAAK,CAACL,IAAI,KAAK,mBAAmB,EAAE;IAC5C,MAAMO,CAAC,GAAG,IAAIL,iBAAiB,CAACG,KAAK,CAACA,KAAK,CAACN,OAAO,CAAC;IACpDQ,CAAC,CAACE,KAAK,GAAGJ,KAAK,CAACA,KAAK,CAACI,KAAK,IAAI,EAAE;IACjC,OAAOF,CAAC;EACV;EACA,MAAMA,CAAC,GAAG,IAAIV,KAAK,CAACQ,KAAK,CAACA,KAAK,CAACN,OAAO,CAAC;EACxCQ,CAAC,CAACE,KAAK,GAAGJ,KAAK,CAACA,KAAK,CAACI,KAAK,IAAI,EAAE;EACjCF,CAAC,CAACP,IAAI,GAAGK,KAAK,CAACA,KAAK,CAACL,IAAI;EACzB,OAAOO,CAAC;AACV"}