{"version":3,"file":"matcherHint.js","names":["_utilsBundle","require","_utils","kNoElementsFoundError","exports","matcherHint","state","locator","matcherName","expression","actual","matcherOptions","timeout","header","utils","replace","colors","red","String","ExpectError","Error","constructor","jestError","customMessage","stackFrames","matcherResult","name","message","stack","stringifyStackFrames","join","isExpectError","e"],"sources":["../../src/matchers/matcherHint.ts"],"sourcesContent":["/**\n * Copyright Microsoft Corporation. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { colors } from 'playwright-core/lib/utilsBundle';\nimport type { ExpectMatcherState } from '../../types/test';\nimport type { Locator } from 'playwright-core';\nimport type { StackFrame } from '@protocol/channels';\nimport { stringifyStackFrames } from 'playwright-core/lib/utils';\n\nexport const kNoElementsFoundError = '<element(s) not found>';\n\nexport function matcherHint(state: ExpectMatcherState, locator: Locator | undefined, matcherName: string, expression: any, actual: any, matcherOptions: any, timeout?: number) {\n  let header = state.utils.matcherHint(matcherName, expression, actual, matcherOptions).replace(/ \\/\\/ deep equality/, '') + '\\n\\n';\n  if (timeout)\n    header = colors.red(`Timed out ${timeout}ms waiting for `) + header;\n  if (locator)\n    header += `Locator: ${String(locator)}\\n`;\n  return header;\n}\n\nexport type MatcherResult<E, A> = {\n  name: string;\n  expected: E;\n  message: () => string;\n  pass: boolean;\n  actual?: A;\n  log?: string[];\n  timeout?: number;\n};\n\nexport class ExpectError extends Error {\n  matcherResult: {\n    message: string;\n    pass: boolean;\n    name?: string;\n    expected?: any;\n    actual?: any;\n    log?: string[];\n    timeout?: number;\n  };\n\n  constructor(jestError: ExpectError, customMessage: string, stackFrames: StackFrame[]) {\n    super('');\n    // Copy to erase the JestMatcherError constructor name from the console.log(error).\n    this.name = jestError.name;\n    this.message = jestError.message;\n    this.matcherResult = jestError.matcherResult;\n\n    if (customMessage)\n      this.message = customMessage + '\\n\\n' + this.message;\n    this.stack = this.name + ': ' + this.message + '\\n' + stringifyStackFrames(stackFrames).join('\\n');\n  }\n}\n\nexport function isExpectError(e: unknown): e is ExpectError {\n  return e instanceof Error && 'matcherResult' in e;\n}\n"],"mappings":";;;;;;;;;AAgBA,IAAAA,YAAA,GAAAC,OAAA;AAIA,IAAAC,MAAA,GAAAD,OAAA;AApBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAQO,MAAME,qBAAqB,GAAAC,OAAA,CAAAD,qBAAA,GAAG,wBAAwB;AAEtD,SAASE,WAAWA,CAACC,KAAyB,EAAEC,OAA4B,EAAEC,WAAmB,EAAEC,UAAe,EAAEC,MAAW,EAAEC,cAAmB,EAAEC,OAAgB,EAAE;EAC7K,IAAIC,MAAM,GAAGP,KAAK,CAACQ,KAAK,CAACT,WAAW,CAACG,WAAW,EAAEC,UAAU,EAAEC,MAAM,EAAEC,cAAc,CAAC,CAACI,OAAO,CAAC,qBAAqB,EAAE,EAAE,CAAC,GAAG,MAAM;EACjI,IAAIH,OAAO,EACTC,MAAM,GAAGG,mBAAM,CAACC,GAAG,CAAE,aAAYL,OAAQ,iBAAgB,CAAC,GAAGC,MAAM;EACrE,IAAIN,OAAO,EACTM,MAAM,IAAK,YAAWK,MAAM,CAACX,OAAO,CAAE,IAAG;EAC3C,OAAOM,MAAM;AACf;AAYO,MAAMM,WAAW,SAASC,KAAK,CAAC;EAWrCC,WAAWA,CAACC,SAAsB,EAAEC,aAAqB,EAAEC,WAAyB,EAAE;IACpF,KAAK,CAAC,EAAE,CAAC;IACT;IAAA,KAZFC,aAAa;IAaX,IAAI,CAACC,IAAI,GAAGJ,SAAS,CAACI,IAAI;IAC1B,IAAI,CAACC,OAAO,GAAGL,SAAS,CAACK,OAAO;IAChC,IAAI,CAACF,aAAa,GAAGH,SAAS,CAACG,aAAa;IAE5C,IAAIF,aAAa,EACf,IAAI,CAACI,OAAO,GAAGJ,aAAa,GAAG,MAAM,GAAG,IAAI,CAACI,OAAO;IACtD,IAAI,CAACC,KAAK,GAAG,IAAI,CAACF,IAAI,GAAG,IAAI,GAAG,IAAI,CAACC,OAAO,GAAG,IAAI,GAAG,IAAAE,2BAAoB,EAACL,WAAW,CAAC,CAACM,IAAI,CAAC,IAAI,CAAC;EACpG;AACF;AAAC1B,OAAA,CAAAe,WAAA,GAAAA,WAAA;AAEM,SAASY,aAAaA,CAACC,CAAU,EAAoB;EAC1D,OAAOA,CAAC,YAAYZ,KAAK,IAAI,eAAe,IAAIY,CAAC;AACnD"}