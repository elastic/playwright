{"version":3,"file":"toBeTruthy.js","names":["_util","require","_matcherHint","toBeTruthy","matcherName","receiver","receiverType","expected","unexpected","arg","query","options","_options$timeout","expectTypes","matcherOptions","isNot","promise","timeout","matches","log","timedOut","received","notFound","kNoElementsFoundError","undefined","actual","message","header","matcherHint","logText","callLogText","pass","name"],"sources":["../../src/matchers/toBeTruthy.ts"],"sourcesContent":["/**\n * Copyright Microsoft Corporation. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { expectTypes, callLogText } from '../util';\nimport { kNoElementsFoundError, matcherHint } from './matcherHint';\nimport type { MatcherResult } from './matcherHint';\nimport type { ExpectMatcherState } from '../../types/test';\nimport type { Locator } from 'playwright-core';\n\nexport async function toBeTruthy(\n  this: ExpectMatcherState,\n  matcherName: string,\n  receiver: Locator,\n  receiverType: string,\n  expected: string,\n  unexpected: string,\n  arg: string,\n  query: (isNot: boolean, timeout: number) => Promise<{ matches: boolean, log?: string[], received?: any, timedOut?: boolean }>,\n  options: { timeout?: number } = {},\n): Promise<MatcherResult<any, any>> {\n  expectTypes(receiver, [receiverType], matcherName);\n\n  const matcherOptions = {\n    isNot: this.isNot,\n    promise: this.promise,\n  };\n\n  const timeout = options.timeout ?? this.timeout;\n  const { matches, log, timedOut, received } = await query(!!this.isNot, timeout);\n  const notFound = received === kNoElementsFoundError ? received : undefined;\n  const actual = matches ? expected : unexpected;\n  const message = () => {\n    const header = matcherHint(this, receiver, matcherName, 'locator', arg, matcherOptions, timedOut ? timeout : undefined);\n    const logText = callLogText(log);\n    return matches ? `${header}Expected: not ${expected}\\nReceived: ${notFound ? kNoElementsFoundError : expected}${logText}` :\n      `${header}Expected: ${expected}\\nReceived: ${notFound ? kNoElementsFoundError : unexpected}${logText}`;\n  };\n  return {\n    message,\n    pass: matches,\n    actual,\n    name: matcherName,\n    expected,\n    log,\n    timeout: timedOut ? timeout : undefined,\n  };\n}\n"],"mappings":";;;;;;AAgBA,IAAAA,KAAA,GAAAC,OAAA;AACA,IAAAC,YAAA,GAAAD,OAAA;AAjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAQO,eAAeE,UAAUA,CAE9BC,WAAmB,EACnBC,QAAiB,EACjBC,YAAoB,EACpBC,QAAgB,EAChBC,UAAkB,EAClBC,GAAW,EACXC,KAA6H,EAC7HC,OAA6B,GAAG,CAAC,CAAC,EACA;EAAA,IAAAC,gBAAA;EAClC,IAAAC,iBAAW,EAACR,QAAQ,EAAE,CAACC,YAAY,CAAC,EAAEF,WAAW,CAAC;EAElD,MAAMU,cAAc,GAAG;IACrBC,KAAK,EAAE,IAAI,CAACA,KAAK;IACjBC,OAAO,EAAE,IAAI,CAACA;EAChB,CAAC;EAED,MAAMC,OAAO,IAAAL,gBAAA,GAAGD,OAAO,CAACM,OAAO,cAAAL,gBAAA,cAAAA,gBAAA,GAAI,IAAI,CAACK,OAAO;EAC/C,MAAM;IAAEC,OAAO;IAAEC,GAAG;IAAEC,QAAQ;IAAEC;EAAS,CAAC,GAAG,MAAMX,KAAK,CAAC,CAAC,CAAC,IAAI,CAACK,KAAK,EAAEE,OAAO,CAAC;EAC/E,MAAMK,QAAQ,GAAGD,QAAQ,KAAKE,kCAAqB,GAAGF,QAAQ,GAAGG,SAAS;EAC1E,MAAMC,MAAM,GAAGP,OAAO,GAAGX,QAAQ,GAAGC,UAAU;EAC9C,MAAMkB,OAAO,GAAGA,CAAA,KAAM;IACpB,MAAMC,MAAM,GAAG,IAAAC,wBAAW,EAAC,IAAI,EAAEvB,QAAQ,EAAED,WAAW,EAAE,SAAS,EAAEK,GAAG,EAAEK,cAAc,EAAEM,QAAQ,GAAGH,OAAO,GAAGO,SAAS,CAAC;IACvH,MAAMK,OAAO,GAAG,IAAAC,iBAAW,EAACX,GAAG,CAAC;IAChC,OAAOD,OAAO,GAAI,GAAES,MAAO,iBAAgBpB,QAAS,eAAce,QAAQ,GAAGC,kCAAqB,GAAGhB,QAAS,GAAEsB,OAAQ,EAAC,GACtH,GAAEF,MAAO,aAAYpB,QAAS,eAAce,QAAQ,GAAGC,kCAAqB,GAAGf,UAAW,GAAEqB,OAAQ,EAAC;EAC1G,CAAC;EACD,OAAO;IACLH,OAAO;IACPK,IAAI,EAAEb,OAAO;IACbO,MAAM;IACNO,IAAI,EAAE5B,WAAW;IACjBG,QAAQ;IACRY,GAAG;IACHF,OAAO,EAAEG,QAAQ,GAAGH,OAAO,GAAGO;EAChC,CAAC;AACH"}