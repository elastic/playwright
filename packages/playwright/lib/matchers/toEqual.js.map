{"version":3,"file":"toEqual.js","names":["_util","require","_matcherHint","EXPECTED_LABEL","RECEIVED_LABEL","toEqual","matcherName","receiver","receiverType","query","expected","options","_options$timeout","expectTypes","matcherOptions","comment","contains","isNot","promise","timeout","matches","pass","received","log","timedOut","message","matcherHint","undefined","utils","printExpected","printReceived","callLogText","printDiffOrStringify","actual","name"],"sources":["../../src/matchers/toEqual.ts"],"sourcesContent":["/**\n * Copyright Microsoft Corporation. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { expectTypes, callLogText } from '../util';\nimport { matcherHint } from './matcherHint';\nimport type { MatcherResult } from './matcherHint';\nimport type { ExpectMatcherState } from '../../types/test';\nimport type { Locator } from 'playwright-core';\n\n// Omit colon and one or more spaces, so can call getLabelPrinter.\nconst EXPECTED_LABEL = 'Expected';\nconst RECEIVED_LABEL = 'Received';\n\nexport async function toEqual<T>(\n  this: ExpectMatcherState,\n  matcherName: string,\n  receiver: Locator,\n  receiverType: string,\n  query: (isNot: boolean, timeout: number) => Promise<{ matches: boolean, received?: any, log?: string[], timedOut?: boolean }>,\n  expected: T,\n  options: { timeout?: number, contains?: boolean } = {},\n): Promise<MatcherResult<any, any>> {\n  expectTypes(receiver, [receiverType], matcherName);\n\n  const matcherOptions = {\n    comment: options.contains ? '' : 'deep equality',\n    isNot: this.isNot,\n    promise: this.promise,\n  };\n\n  const timeout = options.timeout ?? this.timeout;\n\n  const { matches: pass, received, log, timedOut } = await query(!!this.isNot, timeout);\n\n  const message = pass\n    ? () =>\n      matcherHint(this, receiver, matcherName, 'locator', undefined, matcherOptions, timedOut ? timeout : undefined) +\n      `Expected: not ${this.utils.printExpected(expected)}\\n` +\n      `Received: ${this.utils.printReceived(received)}` + callLogText(log)\n    : () =>\n      matcherHint(this, receiver, matcherName, 'locator', undefined, matcherOptions, timedOut ? timeout : undefined) +\n      this.utils.printDiffOrStringify(\n          expected,\n          received,\n          EXPECTED_LABEL,\n          RECEIVED_LABEL,\n          false,\n      ) + callLogText(log);\n\n  // Passing the actual and expected objects so that a custom reporter\n  // could access them, for example in order to display a custom visual diff,\n  // or create a different error message\n  return {\n    actual: received,\n    expected, message,\n    name: matcherName,\n    pass,\n    log,\n    timeout: timedOut ? timeout : undefined,\n  };\n}\n"],"mappings":";;;;;;AAgBA,IAAAA,KAAA,GAAAC,OAAA;AACA,IAAAC,YAAA,GAAAD,OAAA;AAjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAQA;AACA,MAAME,cAAc,GAAG,UAAU;AACjC,MAAMC,cAAc,GAAG,UAAU;AAE1B,eAAeC,OAAOA,CAE3BC,WAAmB,EACnBC,QAAiB,EACjBC,YAAoB,EACpBC,KAA6H,EAC7HC,QAAW,EACXC,OAAiD,GAAG,CAAC,CAAC,EACpB;EAAA,IAAAC,gBAAA;EAClC,IAAAC,iBAAW,EAACN,QAAQ,EAAE,CAACC,YAAY,CAAC,EAAEF,WAAW,CAAC;EAElD,MAAMQ,cAAc,GAAG;IACrBC,OAAO,EAAEJ,OAAO,CAACK,QAAQ,GAAG,EAAE,GAAG,eAAe;IAChDC,KAAK,EAAE,IAAI,CAACA,KAAK;IACjBC,OAAO,EAAE,IAAI,CAACA;EAChB,CAAC;EAED,MAAMC,OAAO,IAAAP,gBAAA,GAAGD,OAAO,CAACQ,OAAO,cAAAP,gBAAA,cAAAA,gBAAA,GAAI,IAAI,CAACO,OAAO;EAE/C,MAAM;IAAEC,OAAO,EAAEC,IAAI;IAAEC,QAAQ;IAAEC,GAAG;IAAEC;EAAS,CAAC,GAAG,MAAMf,KAAK,CAAC,CAAC,CAAC,IAAI,CAACQ,KAAK,EAAEE,OAAO,CAAC;EAErF,MAAMM,OAAO,GAAGJ,IAAI,GAChB,MACA,IAAAK,wBAAW,EAAC,IAAI,EAAEnB,QAAQ,EAAED,WAAW,EAAE,SAAS,EAAEqB,SAAS,EAAEb,cAAc,EAAEU,QAAQ,GAAGL,OAAO,GAAGQ,SAAS,CAAC,GAC7G,iBAAgB,IAAI,CAACC,KAAK,CAACC,aAAa,CAACnB,QAAQ,CAAE,IAAG,GACtD,aAAY,IAAI,CAACkB,KAAK,CAACE,aAAa,CAACR,QAAQ,CAAE,EAAC,GAAG,IAAAS,iBAAW,EAACR,GAAG,CAAC,GACpE,MACA,IAAAG,wBAAW,EAAC,IAAI,EAAEnB,QAAQ,EAAED,WAAW,EAAE,SAAS,EAAEqB,SAAS,EAAEb,cAAc,EAAEU,QAAQ,GAAGL,OAAO,GAAGQ,SAAS,CAAC,GAC9G,IAAI,CAACC,KAAK,CAACI,oBAAoB,CAC3BtB,QAAQ,EACRY,QAAQ,EACRnB,cAAc,EACdC,cAAc,EACd,KACJ,CAAC,GAAG,IAAA2B,iBAAW,EAACR,GAAG,CAAC;;EAExB;EACA;EACA;EACA,OAAO;IACLU,MAAM,EAAEX,QAAQ;IAChBZ,QAAQ;IAAEe,OAAO;IACjBS,IAAI,EAAE5B,WAAW;IACjBe,IAAI;IACJE,GAAG;IACHJ,OAAO,EAAEK,QAAQ,GAAGL,OAAO,GAAGQ;EAChC,CAAC;AACH"}